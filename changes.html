<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Allegro - Recent changes</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <link rel="stylesheet" href="web_style.css" />
  <link rel="alternate" type="application/atom+xml"
      href="feed_atom.xml" title="Allegro news"
  />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<div id="main_header">
<div id="header_container">
<img id="logo" src="images/logo.png" alt="Allegro" height="58" width="186" />
<div id="title">
A game programming library
</div>
</div>
</div>
<div id="left">
<div id="sidebar">
<ul>
<li><strong>Allegro</strong>
<ul>
<li><a href="index.html">About</a></li>
<li><a href="git.html">Git repository</a></li>
<li><a href="license.html">License</a></li>
<li><a href="examples_demos.html">Examples</a></li>
<li><a href="https://github.com/liballeg/allegro5/issues">Bug
tracker</a></li>
<li><a href="bindings.html">Language bindings</a></li>
</ul></li>
<li><strong>Downloads</strong>
<ul>
<li><strong><a href="download.html">Latest version</a></strong></li>
<li><a href="old.html">Older versions</a></li>
<li><a href="addons.html">Extra addons</a></li>
</ul></li>
<li><strong>Documentation</strong>
<ul>
<li><strong><a href="http://liballeg.org/a5docs/trunk/">Latest
version</a></strong></li>
<li><a href="api.html">All versions</a></li>
<li><a href="docs.html">Tutorials</a></li>
<li><a href="books.html">Books</a></li>
<li><a
href="https://github.com/liballeg/allegro_wiki/wiki">Wiki</a></li>
</ul></li>
<li><strong>Community</strong>
<ul>
<li><a href="http://www.allegro.cc/forums/">Forums</a></li>
<li><a href="https://discord.gg/f3Cd4TZzpp">Discord</a></li>
<li><a href="irc.html">IRC</a></li>
<li><a href="game_jams.html">Game Jams</a></li>
<li><a href="maillist.html">Mailing lists</a></li>
</ul></li>
<li><strong>Misc</strong>
<ul>
<li><a href="readme.html">History</a></li>
<li><a href="oldnews.html">Older news</a></li>
<li><a href="logos.html">Logos</a></li>
<li><a href="digmid.html">DIGMID</a></li>
<li><a href="links.html">Links</a></li>
<li><a href="mirrors.html">Mirrors</a></li>
<li><a href="webmasters.html">Webmasters</a></li>
<li><a href="humor.html">Humor</a></li>
</ul></li>
</ul>
<!-- keep blank line for correct HTML -->
</div>
<!-- sidebar -->
<div id="hosting">
<p><a href="https://github.com/liballeg">GitHub project</a> <br/> <br/>
<a
href="https://projects.tuxfamily.org/?do=group;name=allegro">TuxFamily
project</a></p>
</div>
<!-- hosting -->
</div>
<!-- left -->
<div id="content">
<header id="title-block-header">
<h1 class="title">Allegro - Recent changes</h1>
</header>
<p>See <code>changes._tx</code> for changes in earlier versions of
Allegro. These lists serve as summaries; the full histories are in the
git repository.</p>
<h1 id="changes-from-5.0.10-to-5.0.11-january-2015">Changes from 5.0.10
to 5.0.11 (January 2015)</h1>
<p>The main developers this time were: SiegeLord and Peter Wang.</p>
<p>Core:</p>
<ul>
<li>Fix OSX backend on OSX 10.10 (lordnoriyuki).</li>
</ul>
<p>Audio addon:</p>
<ul>
<li><p>Fix/avoid all sound examples freezing on OSX with the aqueue
driver (Elias Pschernig).</p></li>
<li><p>Fix a deadlock in Pulseaudio driver.</p></li>
</ul>
<p>Other:</p>
<ul>
<li><p>Fix build warnings.</p></li>
<li><p>Improve documentation (syntax highlighting).</p></li>
</ul>
<h1 id="changes-from-5.0.9-to-5.0.10-june-2013">Changes from 5.0.9 to
5.0.10 (June 2013)</h1>
<p>The main developers this time were: Trent Gamblin, Paul Suntsov,
Peter Wang.</p>
<p>Core:</p>
<ul>
<li>Register system interface even if no display driver available on
Windows.</li>
</ul>
<p>Displays:</p>
<ul>
<li><p>Don’t crash in al_create_display if there is no display
driver.</p></li>
<li><p>Don’t crash at shutdown if there is no display driver
(Windows).</p></li>
<li><p>Don’t fail init if both D3D, GL drivers unavailable
(Windows).</p></li>
<li><p>Run fullscreen toggle on main thread (OS X).</p></li>
<li><p>Destroy the backbuffer bitmap when destroying the display (OS
X).</p></li>
<li><p>Switch to new NSTrackingArea API (OS X).</p></li>
<li><p>Check availability of fullscreen button on window frame at
run-time (OS X).</p></li>
</ul>
<p>Graphics:</p>
<ul>
<li><p>Add ALLEGRO_SRC_COLOR, ALLEGRO_DEST_COLOR,
ALLEGRO_INVERSE_SRC_COLOR, ALLEGRO_INVERSE_DEST_COLOR blending modes
(initially by Jon Rafkind and Elias Pschernig).</p></li>
<li><p>Let al_destroy_bitmap implicitly untarget the bitmap on the
calling thread.</p></li>
<li><p>Use memory bitmap drawing when either bitmap is locked
(OpenGL).</p></li>
<li><p>Add const qualifiers to glUniform*v() functions (Aaron
Bolyard).</p></li>
</ul>
<p>Input:</p>
<ul>
<li><p>al_set_mouse_xy on Windows resulted in the mouse getting set to
the wrong position in windowed modes.</p></li>
<li><p>Scale the user supplied mouse cursor if it’s too big
(Windows).</p></li>
<li><p>Fix mouse warping on OS X.</p></li>
<li><p>Fix mouse warping in Linux evdev mouse driver.</p></li>
</ul>
<p>Audio addon:</p>
<ul>
<li><p>pulseaudio: Use smaller buffer size by default, and make it
configurable.</p></li>
<li><p>pulseaudio: Clean up state transitions.</p></li>
<li><p>Fix looping in Ogg Vorbis stream (Todd Cope).</p></li>
<li><p>Enable the use of the unpatched DirectX SDK to build Allegro with
MinGW.</p></li>
</ul>
<p>Color addon:</p>
<ul>
<li>Fix al_color_rgb_to_html blue component (Jeff Bernard).</li>
</ul>
<p>Font addons:</p>
<ul>
<li>Make al_init_ttf_addon return true for subsequent calls.</li>
</ul>
<p>Primitives addon:</p>
<ul>
<li><p>Disallow 3 component vectors for ALLEGRO_PRIM_TEX_COORD.</p></li>
<li><p>Check that the vertex declaration is valid before creating
it.</p></li>
<li><p>Respect filter settings of textures in the D3D backend.</p></li>
</ul>
<p>Build system:</p>
<ul>
<li><p>Do not install most internal header files.</p></li>
<li><p>Do not search for and link with unneeded X libraries.</p></li>
</ul>
<p>Examples:</p>
<ul>
<li>ex_audio_timer: New example.</li>
</ul>
<p>Other:</p>
<ul>
<li><p>Minor fixes.</p></li>
<li><p>Various documentation updates.</p></li>
<li><p>A lot of code refactoring.</p></li>
</ul>
<h1 id="changes-from-5.0.8-to-5.0.9-february-2013">Changes from 5.0.8 to
5.0.9 (February 2013)</h1>
<p>The main developers this time were: Trent Gamblin, Elias Pschernig,
Peter Wang.</p>
<p>Core:</p>
<ul>
<li><p>Clean up logging subsystem at shutdown (muhkuh).</p></li>
<li><p>Fix a problem with creating a display after Allegro is shut down
then re-initialised on X11.</p></li>
<li><p>Fix use of clobbered return value from setlocale() on
X11.</p></li>
<li><p>Fix use of double math functions for float arguments (Nick
Trout).</p></li>
</ul>
<p>Displays:</p>
<ul>
<li><p>Fix al_set/get_window position on Windows so getting/setting to
the same position continuosly doesn’t move the window. (Michael
Swiger)</p></li>
<li><p>Add al_set_display_icons (plural). Implemented on X11 and
Windows.</p></li>
<li><p>Made al_get_display_mode return the closest thing to a pixel
format possible with the WGL driver (tobing).</p></li>
<li><p>Move WGL context destruction out of the message pump thread and
into the user/main thread.</p></li>
<li><p>Allow command-tab to work in fullscreen window mode on OS
X.</p></li>
</ul>
<p>Graphics:</p>
<ul>
<li><p>Avoid null pointer dereference when setting a target bitmap after
its video_texture has already been released (D3D).</p></li>
<li><p>Make d3d_lock_region fail immediately if _al_d3d_sync_bitmap
failed, likely because the device was lost.</p></li>
<li><p>Set device_lost flag immediately when d3d_display_thread_proc
finds the device is lost.</p></li>
<li><p>Sync bitmaps before resizing display to prevent changes being
lost after the resize (D3D).</p></li>
<li><p>Revert a faulty FBO rebinding optimisation in
al_set_target_bitmap.</p></li>
<li><p>Fix OpenGL extensions being completely ignored on OS X.</p></li>
<li><p>Support stencil buffer on iOS.</p></li>
</ul>
<p>Input:</p>
<ul>
<li>Partially fix mouse buttons “sticking” on Mac, e.g. holding the
mouse and toggling fullscreen window.</li>
</ul>
<p>Filesystem:</p>
<ul>
<li><p>Keep absolute path in ALLEGRO_FS_ENTRYs so that later changes to
the working directory do not affect the interpretation of the
path.</p></li>
<li><p>Set ALLEGRO_FILEMODE_HIDDEN properly on Unix.</p></li>
<li><p>Make sure stat mode bits are cleared in default implementation of
al_update_fs_entry.</p></li>
<li><p>Support Unicode paths on Windows.</p></li>
<li><p>Change description of al_get_fs_entry_name about not returning
absolute path if created from relative path; no longer true for either
the default or Physfs implementations.</p></li>
</ul>
<p>Audio addons:</p>
<ul>
<li><p>Shut down threads properly when when destroying FLAC and modaudio
streams.</p></li>
<li><p>Fix PulseAudio driver trying to connect to a non-existent server
forever.</p></li>
</ul>
<p>Image I/O addon:</p>
<ul>
<li><p>Fixed loading interlaced .png files with libpng.</p></li>
<li><p>Use Allegro built-in loaders in preference to OS X loaders for
BMP/TGA/PCX. The OS X TGA loader doesn’t support alpha and this is also
more consistent.</p></li>
<li><p>Restored ability of the native OSX image loader to load grayscale
pictures.</p></li>
</ul>
<p>Native dialog addon:</p>
<ul>
<li>Add al_init_native_dialog_addon and
al_shutdown_native_dialog_addon.</li>
</ul>
<p>Build system:</p>
<ul>
<li><p>Rename allegro*-5.0.pc files to allegro*-5.pc. The old names are
deprecated but retained on the 5.0 branch for backwards
compatibility.</p></li>
<li><p>Only generate and install pkg-config files for libraries that we
build.</p></li>
<li><p>Install iPhone internals headers (Nick Trout).</p></li>
</ul>
<p>Examples:</p>
<ul>
<li><p>ex_icon2: New example.</p></li>
<li><p>speed: Use builtin font.</p></li>
</ul>
<p>Other:</p>
<ul>
<li><p>Documentation updates.</p></li>
<li><p>A lot of code refactoring.</p></li>
</ul>
<h1 id="changes-from-5.0.7-to-5.0.8-november-2012">Changes from 5.0.7 to
5.0.8 (November 2012)</h1>
<p>The main developers this time were: Dennis Busch, Trent Gamblin,
Elias Pschernig, Paul Suntsov, Peter Wang.</p>
<p>Core:</p>
<ul>
<li>Added alternate spelling: ALLEGRO_ALIGN_CENTER.</li>
</ul>
<p>Displays:</p>
<ul>
<li><p>Rewrite D3D display format listing code, which was broken. This
should re-enable multi-sampling and fix ex_depth_mask being slow with
D3D.</p></li>
<li><p>Fixed a case where changing fullscreen mode in D3D via
al_resize_display caused a crash and loss of loaded bitmaps
information.</p></li>
<li><p>Fixed a case where changing fullscreen mode in OpenGL (on
Windows) via al_resize_display cause nothing to be rendered after the
mode change.</p></li>
<li><p>Fix crashes when resizing a WGL fullscreen window.</p></li>
<li><p>Fixed missing/incorrect resize events under Windows.</p></li>
<li><p>Fix al_set_new_display_adapter on OS X.</p></li>
<li><p>Fix use of invalidated pointers in D3D driver when the first
format fails.</p></li>
<li><p>Fix bug where setting the mouse cursor had no effect when the
mouse was captured (mouse button held down).</p></li>
<li><p>Fix windows not having a minimise button when set to windowed
state from fullscreen window state.</p></li>
<li><p>Respect ALLEGRO_FRAMELESS flag properly when toggling from
fullscreen window state to windowed state (Windows).</p></li>
<li><p>Don’t generate DISPLAY_LOST events when resizing a fullscreen
display.</p></li>
<li><p>Scale window icon to sizes returned by GetSystemMetrics
(Windows).</p></li>
<li><p>Fixed ALLEGRO_FULLSCREEN_WINDOW under OS X.</p></li>
<li><p>Added al_osx_get_window function (Dennis Gooden).</p></li>
</ul>
<p>Graphics:</p>
<ul>
<li><p>al_draw_pixel was crashing when drawn on sub-bitmaps on
OpenGL.</p></li>
<li><p>Fix a potential crash when drawing the screen to a bitmap with
D3D.</p></li>
<li><p>Avoid null pointer dereference when setting a target bitmap after
its video_texture has already been released (D3D).</p></li>
<li><p>Lock bitmap to prevent slowness when creating a cursor from a
non-memory bitmap on Windows.</p></li>
<li><p>Conditionally lock bitmap when creating cursor on X11 (previously
it did so even if already locked).</p></li>
<li><p>Don’t use NSOpenGLPFAAccelerated unnecessarily (OS X).</p></li>
</ul>
<p>Input:</p>
<ul>
<li><p>Fix incorrect keyboard modifier flags after leaving and
re-entering a window (Windows).</p></li>
<li><p>Fixed a bug with mouse enter/leave events for resized windows
under OSX (Dennis Gooden).</p></li>
<li><p>Temporary fix for delay after mouse warp on OS X.</p></li>
</ul>
<p>File I/O:</p>
<ul>
<li><p>Fix al_fputc on big-endian. Reported by Andreas Rönnquist and
Tobias Hansen.</p></li>
<li><p>Make al_fputc return value like fputc when out of range.</p></li>
<li><p>Fix al_read_directory crash on 64-bit Windows (simast).</p></li>
</ul>
<p>Image addon:</p>
<ul>
<li><p>Don’t include native image loader source files in builds with the
native image loaders disabled (OSX, iOS).</p></li>
<li><p>Added a missing autorelease-pool to the OSX bitmap saving
function (sleepywind).</p></li>
<li><p>Fix OSX native image loader for loading not-premultiplied RGB
data. Previously the data was “de-multiplied”, with possibly all
information lost.</p></li>
<li><p>Fix OSX native image loader for loading bitmaps without an alpha
channel. They appeared completely black previously.</p></li>
</ul>
<p>Font addons:</p>
<ul>
<li><p>Add builtin font creation function.</p></li>
<li><p>Added ALLEGRO_ALIGN_INTEGER text drawing flag (Todd
Cope).</p></li>
<li><p>Made TTF addon include padding on the top and left edges of pages
(Todd Cope).</p></li>
</ul>
<p>Audio addon:</p>
<ul>
<li><p>Use programmatically generated interpolators. They cover an
additional case which was missed and should be slightly more
efficient.</p></li>
<li><p>Support linear interpolation for 16-bit mixers.</p></li>
<li><p>Add cubic interpolation for mixers (off by default).</p></li>
<li><p>Fix potential deadlock in stop_voice for OpenAL.</p></li>
<li><p>Fix potential deadlock in stop_voice for DirectSound.</p></li>
<li><p>Improve buffer filling behaviour for DirectSound, reducing pops
and crackles significantly on slower machines.</p></li>
<li><p>Increase default buffer size for DirectSound to 8192
samples.</p></li>
<li><p>Fix setting the speed of an audio stream after it was attached to
the mixer.</p></li>
</ul>
<p>Native dialogs addon:</p>
<ul>
<li><p>Do not unload of rich edit module when closing one text log
window while another exists. Reported by URB753.</p></li>
<li><p>Use default colours for Windows text log implementation, avoiding
problems when the previous custom colours failed, leading to black text
on a nearly black background.</p></li>
</ul>
<p>Build system:</p>
<ul>
<li>Install pkg-config files when cross-compiling on Unix.</li>
</ul>
<p>Examples:</p>
<ul>
<li><p>ex_synth: Add button to save waveform to a file.</p></li>
<li><p>ex_multisample: Demonstrate using moving bitmaps.</p></li>
<li><p>speed: Avoid poor performance due to needless redraws.</p></li>
<li><p>Renamed a5teroids to Cosmic Protector</p></li>
</ul>
<p>Other:</p>
<ul>
<li><p>Many minor bug fixes.</p></li>
<li><p>Various documentation updates.</p></li>
</ul>
<h1 id="changes-from-5.0.6-to-5.0.7-june-2012">Changes from 5.0.6 to
5.0.7 (June 2012)</h1>
<p>The main developers this time were: Trent Gamblin, Elias Pschernig,
Peter Wang.</p>
<p>Core:</p>
<ul>
<li><p>Fix ALLEGRO_STATIC_ASSERT collisions from different files
included in the same translation unit. Reported by tobing.</p></li>
<li><p>Make al_ref_cstr, al_ref_ustr and al_ref_buffer return const
ALLEGRO_USTR<em> instead of just an ALLEGRO_USTR</em> (Paul
Suntsov).</p></li>
<li><p>Make al_ustr_empty_string const correct.</p></li>
<li><p>Fix many memory leak/warnings on MacOS X (Pär
Arvidsson).</p></li>
<li><p>Fix typo preventing get_executable_name from using System V
procfs correctly. Reported by Max Savenkov.</p></li>
</ul>
<p>Displays:</p>
<ul>
<li><p>Add ALLEGRO_FRAMELESS as a preferred synonym for the confusing
ALLEGRO_NOFRAME flag.</p></li>
<li><p>Rename al_toggle_display_flag to al_set_display_flag, retaining
the older name for compatibility.</p></li>
<li><p>Set WM_NAME for some window managers (X11).</p></li>
</ul>
<p>Graphics:</p>
<ul>
<li><p>Force al_create_bitmap to not create oversized bitmaps, to
mitigate integer overflow problems.</p></li>
<li><p>Removed initial black frame on all Allegro programs.</p></li>
</ul>
<p>OpenGL:</p>
<ul>
<li><p>Texture should be ‘complete’ (min/mag and wrap set) before
glTexImage2D.</p></li>
<li><p>Fixed a bug in al_unlock_bitmap where the pixel alignment
mistakenly was used as row length.</p></li>
<li><p>Fixed typo in names of some OpenGL extension functions.</p></li>
<li><p>Display list of OpenGL extensions in allegro.log also for OpenGL
3.0.</p></li>
</ul>
<p>Direct3D:</p>
<ul>
<li>Fixed a bug in the D3D driver where separate alpha blending was
being tested for when it shouldn’t have been (Max Savenkov).</li>
</ul>
<p>Input:</p>
<ul>
<li><p>Monitor /dev/input instead of /dev on Linux for hotplugging
joysticks (Jon Rafkind).</p></li>
<li><p>Do not permanently change the locale for the X11 keyboard driver.
Set LC_CTYPE only, not LC_ALL.</p></li>
</ul>
<p>Audio addon:</p>
<ul>
<li><p>Fix desychronization due to inaccurate sample positions when
resampling. Thanks to _Bnu for discovering the issue and Paul Suntsov
for devising the correct solution.</p></li>
<li><p>Fix linear interpolation across audio stream buffer
fragments.</p></li>
<li><p>Fix two minor memory leaks in the PulseAudio driver.</p></li>
</ul>
<p>Image I/O addon:</p>
<ul>
<li><p>Improve compatibility of BMP loader. In particular, support
bitmaps with V2-V5 headers and certain alpha bit masks.</p></li>
<li><p>Fix TGA loader using more memory than necessary. Reported by Max
Savenkov.</p></li>
</ul>
<p>Font addon:</p>
<ul>
<li>Use user set pixel format for fonts.</li>
</ul>
<p>Native dialogs addon:</p>
<ul>
<li><p>Clear mouse state after dialogs or else it gets messed up
(OSX).</p></li>
<li><p>Fix some warnings in gtk_dialog.c.</p></li>
<li><p>Wrap use of NSAlert so it can be run on the main thread with
return value.</p></li>
</ul>
<p>Examples:</p>
<ul>
<li><p>Add ex_resample_test.</p></li>
<li><p>ex_audio_props: Add bidir button.</p></li>
<li><p>ex_joystick_events: Support hotplugging and fix display of 3-axis
sticks.</p></li>
<li><p>Add test_driver –no-display flag. (Tobias Hansen)</p></li>
</ul>
<p>Other:</p>
<ul>
<li><p>Various documentation updates.</p></li>
<li><p>Other minor bug fixes.</p></li>
<li><p>Fix whatis entries of man pages. (Tobias Hansen)</p></li>
</ul>
<h1 id="changes-from-5.0.5-to-5.0.6-march-2012">Changes from 5.0.5 to
5.0.6 (March 2012)</h1>
<p>The main developers this time were: Trent Gamblin, Matthew Leverton,
Elias Pschernig, Paul Suntsov, Peter Wang.</p>
<p>Core:</p>
<ul>
<li>Added al_register_assert_handler.</li>
</ul>
<p>Graphics:</p>
<ul>
<li><p>Added al_draw_tinted_scaled_rotated_bitmap_region.</p></li>
<li><p>Added al_reset_clipping_rectangle convenience function.</p></li>
<li><p>Added al_get_parent_bitmap.</p></li>
<li><p>Fixed a bug in the OpenGL driver when drawing the backbuffer
outside the clipping rectangle of the target bitmap.</p></li>
<li><p>Make blitting from backbuffer work when using multisampling on
Windows/D3D.</p></li>
</ul>
<p>Displays:</p>
<ul>
<li><p>Set ALLEGRO_MINIMIZED display flag on Windows (Zac
Evans).</p></li>
<li><p>Don’t generate bogus resize events after restoring minimised
window on Windows.</p></li>
<li><p>Fixed bug on Windows where two SWITCH_IN events were fired when
window was minimized/restored (Michael Swiger).</p></li>
<li><p>Fixed inverted al_toggle_display_flag(ALLEGRO_NOFRAME) logic
under Windows as well as a bug where repeatedly setting the flag to on
would make the window grow bigger and bigger (Michael Swiger).</p></li>
<li><p>Fixed inverted al_toggle_display_flag(ALLEGRO_NOFRAME) logic in
X11.</p></li>
<li><p>Prevent a deadlock during display creation on X.</p></li>
<li><p>Fallback to the ‘old’ visual selection method on X instead of
crashing if the ‘new’ visual selection doesn’t work.</p></li>
</ul>
<p>Input:</p>
<ul>
<li>Use the same logic in set_mouse_xy for FULLSCREEN_WINDOW as was used
for FULLSCREEN. (Max OS X)</li>
</ul>
<p>Filesystem:</p>
<ul>
<li><p>Added al_fopen_slice.</p></li>
<li><p>Added al_set_exe_name which allows overriding Allegro’s idea of
the path to the current executable.</p></li>
<li><p>Make al_get_standard_path(ALLEGRO_TEMP_PATH) treat the value of
TMPDIR et al. as a directory name even without a trailing slash.
(Unix)</p></li>
<li><p>Make stdio al_fopen implementation set proper errno on
failure.</p></li>
</ul>
<p>Audio addons:</p>
<ul>
<li><p>Add mixer gain property and functions.</p></li>
<li><p>Improve code to check that DLL symbols are loaded in the acodec
addon. The old method was hacky and broke under -O2 using GCC
4.6.1.</p></li>
</ul>
<p>Image I/O addon:</p>
<ul>
<li>Improved accuracy of un-alpha-premultiplying in the native OSX
bitmap loader.</li>
</ul>
<p>Primitives addon:</p>
<ul>
<li><p>Added al_draw_filled_pieslice and al_draw_pieslice.</p></li>
<li><p>Added al_draw_elliptical_arc.</p></li>
</ul>
<p>TTF addon:</p>
<ul>
<li><p>Added al_load_ttf_font_stretch functions (tobing).</p></li>
<li><p>Added ALLEGRO_TTF_NO_AUTOHINT font loading flag to disable the
Auto Hinter which is enabled by default in newer version of FreeType
(Michał Cichoń).</p></li>
<li><p>Clear locked region so pixel borders aren’t random garbage that
can be seen sometimes with linear filtering on.</p></li>
<li><p>Unlock glyph cache page at end of text_length and
get_text_dimensions (jmasterx).</p></li>
</ul>
<p>Examples:</p>
<ul>
<li><p>Added new examples: ex_audio_chain, ex_display_events,
ex_file_slice.</p></li>
<li><p>ex_ogre3d: Make it work under Windows (AMCerasoli).</p></li>
<li><p>a5teroids: Support gamepads that report small non-zero values for
sticks that are at rest.</p></li>
</ul>
<p>Other:</p>
<ul>
<li><p>Added index to HTML version of the reference manual (Jon
Rafkind).</p></li>
<li><p>Various documentation updates.</p></li>
<li><p>Other minor bug fixes.</p></li>
</ul>
<h1 id="changes-from-5.0.4-to-5.0.5-november-2011">Changes from 5.0.4 to
5.0.5 (November 2011)</h1>
<p>The main developers this time were: Elias Pschernig and Trent
Gamblin.</p>
<p>Graphics:</p>
<ul>
<li><p>Fixed several instances of windows being positioned wrong on
Windows: regular windows, WGL FULLSCREEN_WINDOW, and ALLEGRO_NOFRAME
windows.</p></li>
<li><p>Don’t re-bind the FBO in al_set_target_bitmap if the new target
bitmap shares the parent bitmap with the new target bitmap (Paul
Suntsov).</p></li>
<li><p>Zero out fake refresh rate information from the nvidia
proprietary driver on X11 (Peter Wang).</p></li>
<li><p>Implemented the ALLEGRO_FULLSCREEN_WINDOW flag for iOS.</p></li>
</ul>
<p>Input:</p>
<ul>
<li><p>Make al_set_mouse_xy work in fullscreen on Windows.</p></li>
<li><p>Fixed a race condition in al_init_joystick.</p></li>
<li><p>Fixed problem on OS X where having two identical gamepads
attached would cause joystick initialization to hang (Thanks to Todd
Cope for pointing it out.)</p></li>
<li><p>Fixed iphone joystick events (it assumed a call to
al_get_joystick but that’s not required when using events).</p></li>
</ul>
<p>TTF fonts:</p>
<ul>
<li>Save new bitmap flags and bitmap format at time of loading font and
use them when creating pages.</li>
</ul>
<p>Primitives addon:</p>
<ul>
<li>Very thin arcs/pieslices were not drawn due to an overzealous check
(Paul Suntsov).</li>
</ul>
<p>Native dialogs addon:</p>
<ul>
<li>Implemented al_show_native_message_box for iOS.</li>
</ul>
<p>Other:</p>
<ul>
<li><p>Use …/Library/Application Support for ALLEGRO_USER_SETTINGS_PATH
and ALLEGRO_USER_DATA_PATH on iOS.</p></li>
<li><p>Listen for applicationDidBecomeActive and
applicationWillResignActive instead of applicationWillEnterForeground
and applicationDidEnterBackground on iOS. This makes all of the common
situations where you want to pause your game work, such as the lock
button.</p></li>
<li><p>Fix some memory leaks on iOS.</p></li>
</ul>
<p>Documentation:</p>
<ul>
<li><p>Various documentation updates.</p></li>
<li><p>Generate multiple copies of a man page for all the API entries
that it documents.</p></li>
</ul>
<h1 id="changes-from-5.0.3-to-5.0.4-august-2011">Changes from 5.0.3 to
5.0.4 (August 2011)</h1>
<p>The main developers this time were: Trent Gamblin, Matthew Leverton,
Elias Pschernig, Jon Rafkind, Paul Suntsov, Peter Wang and torhu.</p>
<p>Core:</p>
<ul>
<li><p>Restore searching of directories on PATH for DLLs to load on
Windows.</p></li>
<li><p>Fix crash on shutdown in headless Unix environment (no X11
display).</p></li>
<li><p>Change all instances of al_malloc + memset(0) to
al_calloc.</p></li>
</ul>
<p>Graphics:</p>
<ul>
<li><p>Save memory in OpenGL case by freeing bitmap memory after
uploading a texture. Use a temporary buffer when converting lock buffer
back to native texture format.</p></li>
<li><p>Don’t release or refresh memory or sub-bitmaps when D3D device
gets lost/found.</p></li>
<li><p>Do not set D3D sub bitmaps to modified when first creating them.
This can cause major slowdowns when creating a lot of sub-bitmaps and is
likely responsible for slow font performance/startup when using
D3D.</p></li>
<li><p>Fix incorrect number of display formats in D3D (tobing).</p></li>
<li><p>Honor ALLEGRO_VSYNC in the WGL driver.</p></li>
<li><p>Make titlebar icons the right size on Windows.</p></li>
<li><p>Fix typo causing weird results of al_get_monitor_info on
X.</p></li>
<li><p>Don’t setup FBO for a sub-bitmap whose parent is locked.</p></li>
<li><p>Specialise ADD/ONE/INVERSE_ALPHA blend mode software scanline
drawers.</p></li>
<li><p>Toggle ALLEGRO_VIDEO_BITMAP flag off when creating a memory
bitmap (both bits were previously on).</p></li>
<li><p>Add null bitmap assertion to al_clone_bitmap.</p></li>
</ul>
<p>Input:</p>
<ul>
<li><p>New system for mapping extended keys in Windows keyboard driver.
Mainly for getting the same keycode for numpad keys independently of the
state of Num Lock.</p></li>
<li><p>More reliable updating of the toggle modifiers in Windows
keyboard driver (Num Lock, Caps Lock, and Scroll Lock).</p></li>
</ul>
<p>Timers:</p>
<ul>
<li>Fix race conditions when starting timers from different
threads.</li>
</ul>
<p>Audio addons:</p>
<ul>
<li><p>Don’t mix into a global temporary sample buffer, causing noise
when two separate mixers are trying to run in parallel.</p></li>
<li><p>Make it possible to start/stop an audio stream which is attached
to a voice.</p></li>
<li><p>ALSA voices could not be resumed after being stopped, because the
update threads quit as soon as a voice is stopped.</p></li>
<li><p>OpenAL backend did not handle the case where _al_voice_update
returns less than a full buffer.</p></li>
<li><p>Attempt to load FLAC and Vorbis DLLs only once to avoid Windows
popping up too many error windows.</p></li>
</ul>
<p>Native dialogs addon:</p>
<ul>
<li>al_show_native_messagebox() on Windows: add UTF-8 support; show
heading; show information icon by default.</li>
</ul>
<p>TTF addon:</p>
<ul>
<li><p>Reduce memory usage.</p></li>
<li><p>Don’t make multiple passes over strings when computing text
dimensions.</p></li>
</ul>
<p>Build system:</p>
<ul>
<li><p>Make sure static builds on Windows never use DLL_TLS (Zac
Evans).</p></li>
<li><p>Made compilation possible with different combinations of
Xinerama, XF86VidMode, or Randr being present.</p></li>
<li><p>cmake: Use find_path HINTS instead of PATHS in our DirectX SDK
scripts.</p></li>
<li><p>cmake: Search for D3DX9 once instead of multiple times (John-Kim
Murphy).</p></li>
<li><p>cmake: Find FLAC/Ogg/Vorbis libraries under the names generated
by the official MSVC project files.</p></li>
<li><p>Include zlib.h explicitly for libpng 1.5.</p></li>
</ul>
<p>Examples:</p>
<ul>
<li><p>Add multisampling to SPEED example. Change examples to use
ALLEGRO_SUGGEST for multisampling.</p></li>
<li><p>Include the font for speed.app under OSX within the bundle so it
can be run by double clicking.</p></li>
<li><p>Use default blending/pre-multiplied alpha in ex_blend2.</p></li>
</ul>
<p>Other:</p>
<ul>
<li><p>Various documentation updates.</p></li>
<li><p>Fix minor memory leaks.</p></li>
</ul>
<p>Bindings:</p>
<ul>
<li><p>Better way to make the Python wrapper work with both Python 2 and
3.</p></li>
<li><p>Include Windows-specific functions in the Python
wrapper.</p></li>
</ul>
<h1 id="changes-from-5.0.2.1-to-5.0.3-may-2011">Changes from 5.0.2.1 to
5.0.3 (May 2011)</h1>
<p>Input:</p>
<ul>
<li><p>Fixed keyboard repeat for extended keys on Windows. Added
ALLEGRO_KEY_MENU. (torhu)</p></li>
<li><p>Make Delete key in Windows send KEY_CHAR event with unichar code
127 (Peter Wang).</p></li>
</ul>
<p>Filesystem:</p>
<ul>
<li>al_remove_filename returned false even if successful (reported by
xpolife).</li>
</ul>
<p>Graphics:</p>
<ul>
<li>On OpenGL ES 1.1, glReadPixels can only read 4 byte pixels (Trent
Gamblin).</li>
</ul>
<p>Font addon:</p>
<ul>
<li>Fix a small memory leak when unregistering a handler with
al_register_font_loader (Trent Gamblin).</li>
</ul>
<p>Primitives addon:</p>
<ul>
<li>Fix assertion failures when drawing al_draw_ellipse, al_draw_arc,
al_draw_rounded_rectangle, al_draw_filled_rounded_rectangle at very
small scales (reported by Carl Olsson).</li>
</ul>
<p>Native dialogs addon:</p>
<ul>
<li>gtk: Fix truncated string if the final button contained a non-ASCII
character (Peter Wang).</li>
</ul>
<p>Other:</p>
<ul>
<li>Minor build fixes and documentation updates.</li>
</ul>
<h1 id="changes-from-5.0.2-to-5.0.2.1-april-2011">Changes from 5.0.2 to
5.0.2.1 (April 2011)</h1>
<ul>
<li>Fix regression on Windows where the keyboard state was not updated
unless the keyboard event source is registered to an event queue.</li>
</ul>
<h1 id="changes-from-5.0.1-to-5.0.2-april-2011">Changes from 5.0.1 to
5.0.2 (April 2011)</h1>
<p>Input:</p>
<ul>
<li><p>Fix inverted mouse wheel on X11.</p></li>
<li><p>Make unicode field in KEY_CHAR events zero for Fn, arrow keys,
etc. for OS X (jmasterx, Peter Hull).</p></li>
<li><p>Support ALLEGRO_KEY_PAD_ENTER and detect left/right Alt and Ctrl
keys independently on Windows (torhu, Matthew Leverton).</p></li>
</ul>
<h1 id="changes-from-5.0.0-to-5.0.1-march-2011">Changes from 5.0.0 to
5.0.1 (March 2011)</h1>
<p>The main developers this time were: Trent Gamblin, Elias Pschernig,
Peter Wang. Other contributions noted in-line.</p>
<p>Graphics:</p>
<ul>
<li><p>Automatically destroy framebuffer objects (FBOs) created for
non-memory bitmaps after a while. This solves the problem of running out
of resources if you set many different target bitmaps.</p></li>
<li><p>Make al_get_opengl_fbo attempt to create an FBO if one doesn’t
exist.</p></li>
<li><p>Avoid very small textures in Direct3D.</p></li>
<li><p>Do not sync from memory when first creating/uploading a bitmap
(D3D).</p></li>
<li><p>Try to fix the problem of the taskbar appearing above fullscreen
windows on Windows.</p></li>
<li><p>Center the window after toggling fullscreen on Windows.</p></li>
</ul>
<p>Input:</p>
<ul>
<li>Support 4-way mouse-wheel and up to 32 mouse buttons in X11.</li>
</ul>
<p>Audio addons:</p>
<ul>
<li><p>Avoid buffer overrun while reading from vorbis files.</p></li>
<li><p>Added optional support for Tremor in place of libvorbis on any
platform.</p></li>
<li><p>Do not prefer DirectSound with OpenAL. This can cause problems
and also will override user config.</p></li>
<li><p>Play silence where needed in DirectSound driver.</p></li>
</ul>
<p>TTF addon:</p>
<ul>
<li><p>Do not hold bitmap drawing when changing target bitmap, which is
invalid and caused transformations to be misapplied.</p></li>
<li><p>Remove FBO for a cache bitmap once we are no longer adding glyphs
to it.</p></li>
</ul>
<p>Build system:</p>
<ul>
<li><p>Force “default” visibility of _al_mangled_main on OS X, otherwise
the dynamic linker cannot find the symbol if building with XCode4 (Owen
Anderson and Peter Hull).</p></li>
<li><p>Generated pkg-config files should take into account LIB_SUFFIX
variable (Cristian Morales Vega).</p></li>
<li><p>Update allegro_font pkg-config file to not require
allegro_primitives.</p></li>
</ul>
<p>Documentation:</p>
<ul>
<li><p>Various documentation updates.</p></li>
<li><p>Add copy of DejaVu font licence.</p></li>
</ul>
<p>Bindings:</p>
<ul>
<li>Add allegro_main addon to the Python wrapper. Make the wrapper work
with Python 3, which has a different string representation. Add
parameter type checking for custom types.</li>
</ul>
<h1 id="changes-from-5.0.0-rc5-to-5.0.0-february-2011">Changes from
5.0.0 RC5 to 5.0.0 (February 2011)</h1>
<p>Color addon:</p>
<ul>
<li>Use colour names from CSS. This is the same as the previous list but
with all grey/gray alternatives.</li>
</ul>
<p>Documentation:</p>
<ul>
<li>Minor documentation updates.</li>
</ul>
<h1 id="changes-from-5.0.0-rc4-to-5.0.0-rc5-february-2011">Changes from
5.0.0 RC4 to 5.0.0 RC5 (February 2011)</h1>
<p>The main developers this time were: Thomas Fjellstrom, Trent Gamblin,
Peter Hull, Matthew Leverton and Peter Wang. Other contributions noted
in-line.</p>
<p>System:</p>
<ul>
<li>Load allegro5.cfg from the directory containing the executable, not
the initial working directory.</li>
</ul>
<p>Graphics:</p>
<ul>
<li><p>Make al_get_monitor_info return success code.</p></li>
<li><p>Replace al_set_new_display_adaptor(-1) with a named constant
ALLEGRO_DEFAULT_DISPLAY_ADAPTER.</p></li>
<li><p>Fix numerous bugs in X mode setting and multi monitor related
code, and introduce new xrandr code.</p></li>
<li><p>Generate ALLEGRO_EVENT_MOUSE_LEAVE_DISPLAY when mouse leaves OS X
window (Evert Glebbeek).</p></li>
<li><p>Hide OS X window during exiting fullscreen window mode, to
prevent the hideous misaligned animation from showing.</p></li>
<li><p>Fix erroneous assertions in OpenGL backend.</p></li>
<li><p>Added a hack which makes OpenGL mode work under Wine for me
(Elias Pschernig).</p></li>
<li><p>Add support for some al_get_display_options in D3D port.</p></li>
</ul>
<p>Keyboard:</p>
<ul>
<li><p>Don’t send KEY_CHAR events for modifier and dead keys (with
contributions from torhu).</p></li>
<li><p>Don’t send KEY_DOWN events for non-physical key events.</p></li>
<li><p>osx: Allow unicode entry (single keypresses only).</p></li>
<li><p>x11: Set the keycode field in KEY_CHAR events to the code of the
last key pressed, as stated in the documentation, even if the char is
due to a compose sequence.</p></li>
<li><p>x11: Get rid of historic behaviour where the unicode field is
always zero when Alt is held down.</p></li>
<li><p>Rename ALLEGRO_KEY_EQUALS_PAD to ALLEGRO_KEY_PAD_EQUALS for
consistency.</p></li>
</ul>
<p>Mouse:</p>
<ul>
<li><p>Add al_grab_mouse and al_ungrab_mouse. Implemented on X11 and
Windows.</p></li>
<li><p>Allow the user configure a key binding to toggle mouse grabbing
on a window.</p></li>
<li><p>Support horizontal mouse wheel on Windows (jmasterx).</p></li>
<li><p>Calculate Y position for al_set_mouse_xy correctly in OS X
windowed mode (X-G).</p></li>
<li><p>Use more appropriate CURSOR_LINK cursor on OS X (X-G).</p></li>
<li><p>Assign different button IDs for separate touches on iPhone
(Michał Cichoń).</p></li>
<li><p>iphone: Remove fake mouse move events as they’re unncessary and
can cause problems with user input tracking.</p></li>
</ul>
<p>Filesystem:</p>
<ul>
<li><p>Clean up al_get_standard_path(): remove SYSTEM_DATA,
SYSTEM_SETTINGS, PROGRAM paths; add RESOURCES and USER_DOCUMENTS paths.
Use system API calls if possible.</p></li>
<li><p>Implement ALLEGRO_USER_DATA_PATH under Linux. Honor
XDG_DATA/CONFIG_HOME environment variables.</p></li>
<li><p>Fix al_make_directory on Windows due to problems with calls to
stat() with trailing slashes.</p></li>
</ul>
<p>Native dialogs addon:</p>
<ul>
<li><p>Use string arguments to al_create_native_file_dialog() and
al_get_native_file_dialog_path() instead of ALLEGRO_PATH.</p></li>
<li><p>Enhance the Windows file selector (initial patch by Todd
Cope):</p>
<ul>
<li><p>Use Windows’ folder selector for
ALLEGRO_FILECHOOSER_FOLDER.</p></li>
<li><p>Implement patterns.</p></li>
<li><p>Display the title of the dialog that the user specified.</p></li>
</ul></li>
</ul>
<p>Primitives addon:</p>
<ul>
<li>Fix changing the D3D blender state without updating the cached
state.</li>
</ul>
<p>TTF addon:</p>
<ul>
<li>Align glyphs in ttf font sheets so as to work around problems with
forced S3TC compression with some OpenGL drivers (Elias Pschernig).</li>
</ul>
<p>Examples:</p>
<ul>
<li>SPEED: add full screen flag, use standard paths for highscores and
data.</li>
</ul>
<p>Build system:</p>
<ul>
<li><p>Check PulseAudio backend will compile before enabling
support.</p></li>
<li><p>Give a louder warning if FLAC/Vorbis/DUMB compile tests
fail.</p></li>
</ul>
<p>Other:</p>
<ul>
<li><p>Many leaks fixed on OS X.</p></li>
<li><p>Minor bug fixes and documentation updates.</p></li>
</ul>
<h1 id="changes-from-5.0.0-rc3-to-5.0.0-rc4-december-2010">Changes from
5.0.0 RC3 to 5.0.0 RC4 (December 2010)</h1>
<p>The main developers this time were: Trent Gamblin, Matthew Leverton,
Elias Pschernig, Peter Wang.</p>
<p>Graphics:</p>
<ul>
<li><p>d3d: Don’t generate intermediate resize events during modal
resize loop.</p></li>
<li><p>Optimize D3D9 driver by caching blender state and scissor
rectangle so redundant calls to D3D9 functions are avoided (Michał
Cichoń).</p></li>
<li><p>gl: Use glGenerateMipmapEXT to generate mipmaps when FBOs are
used.</p></li>
<li><p>x11: Don’t restore display mode if another fullscreen display is
active.</p></li>
</ul>
<p>Input:</p>
<ul>
<li>iphone: Reverse button/axis events that were swapped at some
point.</li>
</ul>
<p>File I/O:</p>
<ul>
<li><p>Change the way user code implements new ALLEGRO_FILE structures.
This adds al_create_file_handle and al_get_file_userdata.</p></li>
<li><p>Implement default ungetc behavior - used if the interface does
not supply its own.</p></li>
<li><p>Add al_fopen_interface.</p></li>
</ul>
<p>Memfile addon:</p>
<ul>
<li><p>Implement ungetc.</p></li>
<li><p>Add rw file modes.</p></li>
<li><p>Rename header to allegro_memfile.h.</p></li>
<li><p>Add documentation.</p></li>
</ul>
<p>Image I/O addon:</p>
<ul>
<li>Fix endian issues in TGA and Mac OS X image loaders.</li>
</ul>
<p>Other:</p>
<ul>
<li><p>Use _NSGetExecutablePath for
al_get_standard_path(ALLEGRO_EXENAME_PATH) on OS X (Jeff
Connelly).</p></li>
<li><p>Minor bug fixes and documentation updates.</p></li>
</ul>
<h1 id="changes-from-5.0.0-rc2-to-5.0.0-rc3-december-2010">Changes from
5.0.0 RC2 to 5.0.0 RC3 (December 2010)</h1>
<p>The main developers this time were: Michał Cichoń, Trent Gamblin,
Peter Wang.</p>
<p>Graphics:</p>
<ul>
<li><p>Honour subbitmap clipping rectangle under OpenGL (Elias
Pschernig).</p></li>
<li><p>Fix an error in the Direct3D primitives blending.</p></li>
<li><p>al_set_new_window_position() did not have an effect for resizable
windows on X11.</p></li>
<li><p>Fix windows only showing up on first monitor on X11 (Thomas
Fjellstrom).</p></li>
<li><p>Implement al_get_monitor_info() for iDevices.</p></li>
</ul>
<p>Input:</p>
<ul>
<li><p>Separate character inputs from physical key down events. This
removes unichar and modifiers fields from ALLEGRO_EVENT_KEY_DOWN, and
replaces ALLEGRO_EVENT_KEY_REPEAT by ALLEGRO_EVENT_KEY_CHAR. We decided
this design flaw was better fixed now than later.</p></li>
<li><p>Make Mac OS X keyboard driver properly distinguish key down and
key repeat events.</p></li>
</ul>
<p>TTF addon:</p>
<ul>
<li>Respect ALLEGRO_NO_PREMULTIPLIED_ALPHA flag when loading TTF
fonts.</li>
</ul>
<p>Other:</p>
<ul>
<li><p>Fix returning a garbage pointer in maybe_load_library_at_cwd
(Vadik Mironov).</p></li>
<li><p>Remove dependency on dxguid.</p></li>
<li><p>Minor compilation fixes and documentation updates.</p></li>
</ul>
<h1 id="changes-from-5.0.0-rc1-to-5.0.0-rc2-december-2010">Changes from
5.0.0 RC1 to 5.0.0 RC2 (December 2010)</h1>
<p>The developers this time were: Trent Gamblin, Elias Pschernig and
Peter Wang.</p>
<p>System:</p>
<ul>
<li><p>Add al_is_system_installed and hide
al_get_system_driver.</p></li>
<li><p>Prevent ‘DLL hijacking’ security issue on Windows.</p></li>
</ul>
<p>Graphics:</p>
<ul>
<li><p>Change to using premultiplied alpha by default. The new bitmap
flag ALLEGRO_NO_PREMULTIPLIED_ALPHA was added.</p></li>
<li><p>Change the value of ALLEGRO_VIDEO_BITMAP to non-zero.</p></li>
<li><p>Change al_get_opengl_version to return a packed integer.</p></li>
<li><p>Made al_get_opengl_version return an OpenGL ES version (if using
OpenGL ES) rather than an attempted estimate at a desktop GL
version.</p></li>
<li><p>Added function al_get_opengl_variant that returns either
ALLEGRO_DESKTOP_OPENGL or ALLEGRO_OPENGL_ES.</p></li>
<li><p>Make al_have_opengl_extension return bool.</p></li>
<li><p>Fix OpenGL graphics mode height value on Windows.</p></li>
<li><p>Only try to create one Direct3D display at a time.</p></li>
<li><p>Make screensaver activate on Windows Vista and above unless
inhibited.</p></li>
<li><p>Avoid potential divide-by-zeroes when computing the refresh rate
in X11 video modes.</p></li>
</ul>
<p>Events:</p>
<ul>
<li>Delete an incorrect mutex destroy in
al_unregister_event_source.</li>
</ul>
<p>Input:</p>
<ul>
<li>Revert the joystick driver used on OS X 10.4 to the pre-hotplugging
version, rather than one which contained an earlier attempt at
implementing hotplugging. Select the 10.4 or greater joystick driver at
runtime.</li>
</ul>
<p>iPhone:</p>
<ul>
<li>Added two iPhone-specific functions: al_iphone_override_screen_scale
and al_iphone_program_has_halted.</li>
</ul>
<p>Image I/O addon:</p>
<ul>
<li>Made the iPhone and OSX image loaders not try and correct colors to
some arbitrary color space, but instead use the values directly from the
image.</li>
</ul>
<p>Native dialogs addon:</p>
<ul>
<li><p>Tolerate null display in al_show_native_file_dialog on
Windows.</p></li>
<li><p>Make GTK native dialog implementation only call GTK from a single
thread.</p></li>
<li><p>Define al_show_native_message_box to be usable without installing
Allegro.</p></li>
</ul>
<p>Primitives addon:</p>
<ul>
<li>Make primitives addon compilable again without OpenGL.</li>
</ul>
<p>Examples:</p>
<ul>
<li><p>ex_ttf: Test the monochrome flag.</p></li>
<li><p>Work around problems with MSVC and UTF-8 string literals. ex_utf8
is now not built under MSVC.</p></li>
<li><p>Don’t use WIN32 executable type on examples that require the
console (David Capello).</p></li>
</ul>
<p>Other:</p>
<ul>
<li>Minor bug fixes and documentation updates.</li>
</ul>
<h1 id="changes-from-4.9.22-to-5.0.0-rc1-november-2010">Changes from
4.9.22 to 5.0.0 RC1 (November 2010)</h1>
<p>The developers this time were: Trent Gamblin, Evert Glebbeek, Elias
Pschernig, Paul Suntsov, Peter Wang.</p>
<p>Graphics:</p>
<ul>
<li><p>Make al_resize_display keep the original resolution (or change
back) if it can’t set the users request, on Windows.</p></li>
<li><p>Do not emit ALLEGRO_DISPLAY_RESIZE events from the Windows and
X11 display drivers when using al_resize_display.</p></li>
<li><p>[X11] Make al_get_num_display_modes and al_get_display_mode work
if the adapter is set to default. Right now there was no way to query
the modes of the default monitor.</p></li>
<li><p>[X11] Use _NET_WM_STATE_FULLSCREEN hint for “true” fullscreen
displays. Enable mouse grabbing in fullscreen modes.</p></li>
<li><p>Added ALLEGRO_EVENT_DISPLAY_ORIENTATION and implement it on
iOS.</p></li>
<li><p>Dennis Busch fixed a problem with displays not showing up on the
primary display by default in some dual head setups, on
Windows.</p></li>
<li><p>Increase the precision of texture coordinate deltas in the
software triangle renderer, from floats to doubles.</p></li>
<li><p>Remove al_get_frontbuffer(). It wasn’t implemented
anywhere.</p></li>
<li><p>Implement min/mag filter and mipmap flags for Direct3D.</p></li>
</ul>
<p>Input:</p>
<ul>
<li><p>Report correct initial mouse position if a display is created
with the mouse pointer inside, or if the mouse routines are installed
after a display is created (X11, Windows).</p></li>
<li><p>John Murphy fixed improperly mapped axes on the Windows joystick
driver.</p></li>
</ul>
<p>Events:</p>
<ul>
<li>Do not register user event sources with the destructor system as it
cannot work reliably. User event sources must be destroyed
manually.</li>
</ul>
<p>Filesystem:</p>
<ul>
<li><p>Make al_get_fs_entry_name and al_get_current_directory return
strings instead of ALLEGRO_PATH.</p></li>
<li><p>Make al_make_directory create parent directories as
needed.</p></li>
<li><p>Fix al_create_fs_entry to not trim the root path “/” down to the
empty string with the stdio backend.</p></li>
</ul>
<p>Path routines:</p>
<ul>
<li><p>Remove al_make_path_absolute and replace it by
al_rebase_path.</p></li>
<li><p>Remove undocumented behavior of setting a default organization
name of “allegro” for all apps.</p></li>
<li><p>Correctly return standard paths as directories on OS X.</p></li>
</ul>
<p>Threads:</p>
<ul>
<li>Rename al_wait_cond_timed to al_wait_cond_until to match
al_wait_cond_until.</li>
</ul>
<p>Config routines:</p>
<ul>
<li>Add a blank line between sections when writing out a config
file.</li>
</ul>
<p>Other core:</p>
<ul>
<li><p>Move the Windows event loops back into the same thread as the D3D
event loop. It’s a requirement of D3D, else you can get crashes as I was
when resetting the device (like tabbing away from a fullscreen
app).</p></li>
<li><p>Add some missing standard entries to the OS X menu bar (the
“hide”, “hide others” and the window list, mainly).</p></li>
</ul>
<p>Audio addon:</p>
<ul>
<li><p>Automatically stop sample instances which point to a buffer of a
sample which is about to be destroyed with al_destroy_sample.</p></li>
<li><p>alsa: Resume properly after suspending.</p></li>
</ul>
<p>Image I/O addon:</p>
<ul>
<li><p>Make GDI+ support compile cleanly with the headers that come with
MinGW package w32api-3.15.</p></li>
<li><p>Speed up PNG and BMP saving, and NSImageFromAllegroBitmap
loading.</p></li>
</ul>
<p>TTF addon:</p>
<ul>
<li>Add a flag for loading TTFs without anti-aliasing
(ALLEGRO_TTF_MONOCHROME).</li>
</ul>
<p>Primitives addon:</p>
<ul>
<li><p>Fix several failed sub-bitmap related unit tests on
Windows.</p></li>
<li><p>Made thick outlined triangles look nicer when the triangles are
very thin.</p></li>
<li><p>Add a debug-only check for primitives addon initialization to aid
in code portability.</p></li>
</ul>
<p>Examples:</p>
<ul>
<li><p>Added example demonstrating the effect of premultiplied
alpha.</p></li>
<li><p>Make ‘F’ toggle fullscreen window in SPEED (in-game).</p></li>
<li><p>Minor improvements to the a5teroids demo.</p></li>
</ul>
<p>Documentation:</p>
<ul>
<li><p>Many documentation updates.</p></li>
<li><p>Add list of contributors and a readme for packagers.</p></li>
<li><p>Make make_doc tool build cleanly on MSVC, and work around a
problem with recent version of Pandoc on Windows.</p></li>
<li><p>Improve styling of PDF output.</p></li>
<li><p>Add generated man pages to archives.</p></li>
</ul>
<p>Bindings:</p>
<ul>
<li>Implemented array types in the Python wrapper.</li>
</ul>
<h1 id="changes-from-4.9.21-to-4.9.22-september-2010">Changes from
4.9.21 to 4.9.22 (September 2010)</h1>
<p>The developers this time included: Michał Cichoń, Trent Gamblin,
Evert Glebbeek, Angelo Mottola, Elias Pschernig, Paul Suntsov and Peter
Wang.</p>
<p>System:</p>
<ul>
<li>Allow the X11 port to initialise without an X server
connection.</li>
</ul>
<p>Graphics:</p>
<ul>
<li><p>Fix many bugs with bitmap locking.</p></li>
<li><p>Fix many bugs to do with transformations, flipping and
clipping.</p></li>
<li><p>Fix many bugs to do with sub-bitmaps as source and
destination.</p></li>
<li><p>Renamed al_draw_[tinted_]rotated_scaled_bitmap to
al_draw_[tinted_]scaled_rotated_bitmap to match the parameter
order.</p></li>
<li><p>Reimplemented bitmap software rendering routines using newly
optimised software triangle renderer, formerly in the primitives
addon.</p></li>
<li><p>Add pixel_size field to ALLEGRO_LOCKED_REGION.</p></li>
<li><p>Fix bugs to do with pixel alignment on OpenGL.</p></li>
<li><p>Fix OpenGL pixel transfer of 15 bpp formats, where Allegro does
not Allegro does not care whether the unused bit is set or not, but when
transferring to OpenGL it will be interpreted as an alpha bit.</p></li>
<li><p>Disabled support for drawing a bitmap into itself.</p></li>
<li><p>Changed specification of al_draw_*bitmap to not allow
transformation and ignore blending/tinting when the screen itself is
being drawn (except when drawn into a memory bitmap).</p></li>
<li><p>Allow bitmap regions to be outside the bitmap area in drawing
routines.</p></li>
<li><p>Added al_add_new_bitmap_flag convenience function.</p></li>
<li><p>Added three new bitmaps flags ALLEGRO_MAG_LINEAR,
ALLEGRO_MIN_LINEAR, ALLEGRO_MIPMAP. Removed the config settings for
linear/anisotropic min/mag filtering. DirectX side not yet
updated.</p></li>
<li><p>Register destructors for bitmaps, so they will be implicitly
destroyed when Allegro is shut down. This was only true for some bitmaps
previously.</p></li>
<li><p>Don’t allocate memory buffers for video bitmaps when using
OpenGL.</p></li>
<li><p>Make al_get_opengl_extension_list() return NULL if called on a
non-GL display.</p></li>
<li><p>Fix al_create_display for OpenGL forward compatible
contexts.</p></li>
<li><p>Add al_set_current_opengl_context as an explicit way to set the
OpenGL context.</p></li>
<li><p>Rename al_is_opengl_extension_supported to
al_have_opengl_extension.</p></li>
<li><p>Produce more accurate/correct color when going from less to more
bits per component.</p></li>
<li><p>Fix al_set_new_window_position() everywhere.</p></li>
<li><p>Avoid potential deadlock if resizing window to the same size on
X11.</p></li>
<li><p>Fixed turning off vsync in X11.</p></li>
<li><p>Added al_is_d3d_device_lost function.</p></li>
<li><p>Dynamically load dinput and d3d DLLs on Windows.</p></li>
<li><p>Replaced PeekMessage with GetMessage in window event loops for
the D3D and WGL drivers (David Capello).</p></li>
</ul>
<p>Input:</p>
<ul>
<li><p>Added hotplugging support for joysticks on Linux, Windows and OS
X.</p></li>
<li><p>Added al_reconfigure_joysticks function.</p></li>
<li><p>Merged all joystick devices under a single joystick event
source.</p></li>
<li><p>Removed al_get_joystick_number.</p></li>
<li><p>Add al_is_joystick_installed.</p></li>
<li><p>The OS X joystick driver was rewritten; it requires OS X 10.5.
The older driver still exists for OS X 10.4 and earlier but is in a
semi-updated state with regards to hotplugging.</p></li>
<li><p>Allow user to override joystick device paths in the config file
(Linux).</p></li>
<li><p>Fix iphone touch input and clipping for modes other than
w=768,h=1024.</p></li>
<li><p>Fixed missing mouse movement messages on IPhone on touch-up/down.
Also changed how mouse buttons are reported - always as button 1
now.</p></li>
</ul>
<p>Config:</p>
<ul>
<li><p>Give config iterators proper types instead of void *.</p></li>
<li><p>Make al_get_system_config() always return non-NULL if a system
driver is installed.</p></li>
</ul>
<p>Events:</p>
<ul>
<li>Rename al_event_queue_is_empty to al_is_event_queue_empty (with
compatibility define).</li>
</ul>
<p>Timers:</p>
<ul>
<li><p>Add al_add_timer_count function.</p></li>
<li><p>Rename al_timer_is_started to al_get_timer_started.</p></li>
<li><p>Rename al_current_time to al_get_time (with compatibility
define).</p></li>
</ul>
<p>File I/O:</p>
<ul>
<li><p>Add al_open_fs_entry to open a file handle from an
FS_ENTRY.</p></li>
<li><p>Add al_fclearerr.</p></li>
<li><p>Set ALLEGRO_FILEMODE_HIDDEN flag on entries for file names
beginning with dot (OS X).</p></li>
<li><p>Remove al_is_path_present, al_fs_entry_is_directory,
al_fs_entry_is_file (all trivial).</p></li>
</ul>
<p>Primitives addon:</p>
<ul>
<li><p>Optimised most of the software rendering routines by a
lot.</p></li>
<li><p>Triangle drawer was skipping pixels in very thin
triangles.</p></li>
<li><p>Handle lost d3d devices better.</p></li>
<li><p>Fix some bugs found during testing.</p></li>
</ul>
<p>Image I/O addon:</p>
<ul>
<li><p>Fix native image loader on Mac OS X: images that were not 72 dpi
would be rescaled to a smaller size.</p></li>
<li><p>Added native bitmap saving support for OSX.</p></li>
<li><p>Fix jpeg saving when locked region has negative pitch.</p></li>
</ul>
<p>Native dialogs addon:</p>
<ul>
<li><p>Add Windows and OS X text log implementations.</p></li>
<li><p>Add ALLEGRO_FILECHOOSER and ALLEGRO_TEXTLOG types instead of
conflating them into ALLEGRO_NATIVE_DIALOG.</p></li>
<li><p>Fix race condition in al_open_native_text_log.</p></li>
<li><p>Rename al_destroy_native_dialog to
al_destroy_native_file_dialog.</p></li>
<li><p>Rename al_get_native_dialog_event_source to
al_get_native_text_log_event_source.</p></li>
<li><p>Speed up text log appending by making the reader/writers
asynchronous.</p></li>
<li><p>Register destructors for file chooser and text log
dialogs.</p></li>
<li><p>Fix file chooser on Windows returning multiple selections with
slashes appended to filenames. If an initial path was specified then the
dialog wouldn’t open at all; fixed.</p></li>
<li><p>Let native dialog functions fail gracefully.</p></li>
</ul>
<p>Audio addons:</p>
<ul>
<li><p>Init destructors even if audio driver fails to install.</p></li>
<li><p>Dynamically load dsound DLL on Windows.</p></li>
</ul>
<p>Font addons:</p>
<ul>
<li><p>Added al_shutdown_ttf_addon.</p></li>
<li><p>Prevent SIGSEGV for double-closing a file in the TTF addon if it
is not a valid font file.</p></li>
<li><p>Make al_grab_font_from_bitmap not cause a segmentation fault if
the bitmap is garbage.</p></li>
<li><p>Some TTF fonts would not render right at small sizes;
fixed.</p></li>
<li><p>Make al_destroy_font ignore NULL.</p></li>
</ul>
<p>Tests:</p>
<ul>
<li><p>Added a test suite (finally).</p></li>
<li><p>Add a shell script to produce test coverage results using
lcov.</p></li>
</ul>
<p>Examples:</p>
<ul>
<li><p>Add ex_haiku, an example based on Mark Oates’s Haiku game. Mark
generously agreed to let us include it as an Allegro example.</p></li>
<li><p>Added a new example ex_joystick_hotplugging.</p></li>
<li><p>Added a new example ex_filter.</p></li>
<li><p>Make ex_fs_window work on MSVC.</p></li>
<li><p>Allow a5teroids to run without audio, or if audio data doesn’t
load.</p></li>
</ul>
<p>Build system:</p>
<ul>
<li><p>Re-added CMake option that allows forced static linking of
libFLAC.</p></li>
<li><p>Replaced the old iphone xcode project with a cmake iphone
toolchain.</p></li>
</ul>
<p>Documentation:</p>
<ul>
<li>Many updates to the reference manual.</li>
</ul>
<p>Bindings:</p>
<ul>
<li>Added a workaround to the Python wrapper for a Mingw bug.</li>
</ul>
<h1 id="changes-from-4.9.20-to-4.9.21-july-2010">Changes from 4.9.20 to
4.9.21 (July 2010)</h1>
<p>The main developers this time were: Trent Gamblin, Matthew Leverton,
Elias Pschernig, Paul Suntsov, Peter Wang.</p>
<p>Graphics:</p>
<ul>
<li><p>Fixed the mis-termed “blend color”. There is no more color
state.</p>
<ul>
<li><p>al_set*_blender functions lose the color parameter.</p></li>
<li><p>Added 5 new bitmap drawing functions al_draw_tinted*_bitmap with
a color parameter. The parameter is used just like the “blend color”
before.</p></li>
<li><p>All text drawing functions gain a color parameter and use it like
they used the “blend color” before.</p></li>
<li><p>Primitive drawing functions previously sometimes (and sometimes
not) used the “blend color”. Not any longer.</p></li>
</ul></li>
<li><p>Make the current blending mode thread-local state instead of
per-display state.</p></li>
<li><p>Add explicit display arguments to functions which require a
display, but don’t require the rendering context to be current.</p></li>
<li><p>Make al_set_target_bitmap change the current display as
necessary. al_set_target_bitmap(NULL) releases the rendering
context.</p></li>
<li><p>Add al_set_target_backbuffer as a convenience.</p></li>
<li><p>Remove al_set_current_display.</p></li>
<li><p>Give each bitmap its own transformation, i.e. every bitmap has a
transformation, which is in effect when that bitmap is the
target.</p></li>
<li><p>Remove sub-bitmap clip-to-parent restriction on create. Add
out-of-bounds blitting support to memory bitmaps.</p></li>
<li><p>Merge sub-bitmap and parent bitmap clipping; clip source bitmap
to (0,0)-(w,h); fix flipping to/from clipped bitmaps.</p></li>
<li><p>Made mouse cursors independent of displays. You may create
cursors without a display, and you may use a cursor with any
display.</p></li>
<li><p>Rename al_{set,get}_current_video_adapter to *new_display_adapter
for consistency.</p></li>
<li><p>Move the new display video adapter and new window position to
thread-local state, like other new display parameters. Make
al_store_state also save those parameters with
ALLEGRO_STATE_NEW_DISPLAY_PARAMETERS.</p></li>
<li><p>Rename al_transform_transform to al_compose_transform. Switched
the order of parameters in al_compose_transform and al_copy_transform to
match the rest of the transform functions.</p></li>
<li><p>Made memory bitmap manipulation without a display possible
(again?).</p></li>
<li><p>Fixed window resizing in D3D driver. Simplify resize-postponing
on Windows.</p></li>
<li><p>Make al_create_display abort early when the new_display_adapter
is greater than the screen count (X11).</p></li>
<li><p>Added ALLEGRO_MINIMIZED flag to the X11 port.</p></li>
<li><p>Fixed OpenGL version string parsing (bug #3016654).</p></li>
</ul>
<p>Other core:</p>
<ul>
<li><p>Renamed al_install_timer to al_create_timer, and
al_uninstall_timer to al_destroy_timer.</p></li>
<li><p>Rename al_{get,set}_{appname,orgname} to *app_name and
*org_name.</p></li>
<li><p>Fix assertion failure in al_create_mutex_recursive on Windows
(spoofle).</p></li>
</ul>
<p>Primitives addon:</p>
<ul>
<li><p>Made the D3D driver of the primitives addon work with multiple
displays. Also made it handle the display being destroyed
properly.</p></li>
<li><p>Simplified shader recreating on thread destruction when using the
primitives addon with D3D.</p></li>
<li><p>Avoid double free when shutting down the primitives addon
multiple times.</p></li>
<li><p>Older Intel cards don’t implement DrawIndexedPrimitiveUP
correctly. Altered the D3D code to work around that.</p></li>
</ul>
<p>Audio addon:</p>
<ul>
<li>Allow setting the DirectSound buffer size via allegro5.cfg.</li>
</ul>
<p>Image addon:</p>
<ul>
<li>Make GDI+ image loader work with MinGW.</li>
</ul>
<p>Font addon:</p>
<ul>
<li>Nicolas Martyanoff added al_get_font_descent/ascent functions which
query per-font properties. Previously it was necessary to call
al_get_text_dimensions (which now just reports the text dimensions as it
should).</li>
</ul>
<p>Native dialogs addon:</p>
<ul>
<li>Add text log window functions (GTK only for now).</li>
</ul>
<p>Documentation:</p>
<ul>
<li><p>Many updates to the reference manual.</p></li>
<li><p>Improve styling and add Allegro version to HTML pages.</p></li>
<li><p>Separated readme_a5.txt into multiple files, and hopefully
improve them.</p></li>
</ul>
<p>Build system:</p>
<ul>
<li><p>Remove INSTALL_PREFIX. Windows users can now use
CMAKE_INSTALL_PREFIX to set the install path.</p></li>
<li><p>Allow the user to place dependencies in a subdirectory “deps”,
which will be automatically searched.</p></li>
</ul>
<p>Examples:</p>
<ul>
<li><p>Use text log windows in many examples.</p></li>
<li><p>Add ex_noframe: test bitmap manipulation without a
display.</p></li>
</ul>
<p>Bindings:</p>
<ul>
<li>Update Python bindings.</li>
</ul>
<h1 id="changes-from-4.9.19-to-4.9.20-may-2010">Changes from 4.9.19 to
4.9.20 (May 2010)</h1>
<p>The developers this time were: Thomas Fjellstrom, Evert Glebbeek,
Matthew Leverton, Milan Mimica, Paul Suntsov, Trent Gamblin, Elias
Pschernig, Peter Wang. With significant contributions from Michał
Cichoń.</p>
<p>Core:</p>
<ul>
<li><p>Add al_malloc, al_free, et al. These are now used consistently
throughout Allegro and its addons.</p></li>
<li><p>Replace al_set_memory_management_functions by a simpler function,
al_set_memory_interface.</p></li>
<li><p>Renamed some D3D/Windows specific functions to follow the
al_{verb}_{stuff} convention.</p></li>
</ul>
<p>Graphics:</p>
<ul>
<li><p>Move image I/O framework to core, i.e. al_load_bitmap,
al_save_bitmap and bitmap file type registration. Image codecs remain in
allegro_image.</p></li>
<li><p>Added a simple display capabilities querying capability to
al_get_display_option: ALLEGRO_MAX_BITMAP_SIZE,
ALLEGRO_SUPPORT_NPOT_BITMAP, ALLEGRO_CAN_DRAW_INTO_BITMAP,
ALLEGRO_SUPPORT_SEPARATE_ALPHA. (OpenGL only for now)</p></li>
<li><p>Fix in OpenGL 3.0 context creation.</p></li>
<li><p>Make the extensions mechanism compatible with OpenGL version
&gt;= 3. Declared symbols needed by OpenGL 3.2 and 3.3 and brought
OpenGL extensions up to date.</p></li>
<li><p>Fix an assertion in _al_draw_bitmap_region_memory so it does not
trigger when source and destination are the same bitmap.</p></li>
<li><p>Fix some locking issues by setting GL_PACK_ALIGNMENT and
GL_UNPACK_ALIGNMENT before reading/writing pixels.</p></li>
<li><p>Partial implementation of ALLEGRO_FULLSCREEN_WINDOW on OS X (Snow
Leopard, probably Leopard).</p></li>
<li><p>Started X11 fullscreen support (resolution switching).</p></li>
<li><p>Fix handling of X11 size hints.</p></li>
<li><p>Fixed a deadlock related to fullscreen windows under X11 caused
by using a nested lock for a condition variable.</p></li>
<li><p>Use _NET_WM_ICON to set icon on X11 instead of
XSetWMHints.</p></li>
<li><p>Get the iPhone OpenGL version more properly. Only use separate
blending on iPhone with OpenGL ES 2.0+.</p></li>
<li><p>Release the splash view and windows on iPhone, which makes
backgrounding Allegro apps on OS 4.0 work.</p></li>
<li><p>Updated iphone port for IPad (only tested in the
simulator).</p></li>
</ul>
<p>Input:</p>
<ul>
<li><p>Disabled Raw Input code in Windows. Mouse events now reflect
system cursor movements even in fullscreen mode.</p></li>
<li><p>Prevent late WM_MOUSELEAVE notifications from overriding mouse
state display field (Windows).</p></li>
<li><p>Update pollable mouse state with axes events as well as button
events on iPhone.</p></li>
</ul>
<p>Filesystem:</p>
<ul>
<li>Made the filesystem entry functions work under Windows even if the
name passed to al_create_fs_entry has a trailing slash or
backslash.</li>
</ul>
<p>Config routines:</p>
<ul>
<li><p>Add al_{load,save}_config_file_f.</p></li>
<li><p>Reorder al_save_config_file* arguments to match al_save_bitmap
and al_save_sample.</p></li>
<li><p>Optimise config routines to work well for thousands of
keys/sections.</p></li>
</ul>
<p>Image addon:</p>
<ul>
<li><p>Added a GDI+ implementation of the image codecs, which will be
used in favour of libjpeg/libpng if Allegro is compiled with MSVC. Then
allegro_image will not require JPEG/PNG DLLs at runtime.</p></li>
<li><p>Removed format specific image functions.</p></li>
<li><p>Fixed bug in native png loader on iphone: was using the source
color space instead of the target color space which made it fail
whenever they differed (alpha-less paletted pictures).</p></li>
<li><p>Add an autorelease pool around iphone native image loading to
stop memory leaks.</p></li>
</ul>
<p>Font addons:</p>
<ul>
<li><p>Sever the tie between allegro_font and allegro_image. The user
needs to initialise the image addon separately now.</p></li>
<li><p>Rename al_load_ttf_font_entry to al_load_ttf_font_f.</p></li>
<li><p>Fixed problem with glyph precision after applying transformations
in the ttf addon.</p></li>
</ul>
<p>Primitives addon:</p>
<ul>
<li><p>Added al_init_primitives addon function. This is now
required.</p></li>
<li><p>Removed ALLEGRO_PRIM_COLOR; ALLEGRO_COLOR can now be used where
it was required.</p></li>
<li><p>v textures coordinates were off for OpenGL non-power-of-two
textures.</p></li>
<li><p>Free the vertex cache in al_destroy_display on X11.</p></li>
<li><p>Added the dummy vertex shader support to D3D driver of the
primitives addon. Without this, custom vertices either resulted in
warnings or outright crashes on some systems.</p></li>
<li><p>Bring D3D driver up to speed a little bit: transformations now
work properly with sub-bitmap targets; the half-pixel offset now
properly interacts with transformations; al_set_target_bitmap does not
clear the transformation; the proper transformation is set at display
creation.</p></li>
<li><p>Cull the primitives that are completely outside the clipping
region.</p></li>
<li><p>Scale the numbers of vertices for the curvy primitives with the
scale of the current transformation.</p></li>
</ul>
<p>Audio addon:</p>
<ul>
<li><p>Remove driver parameter from al_install_audio.</p></li>
<li><p>Rename al_get_depth_size to al_get_audio_depth_size.</p></li>
<li><p>Rename al_get_audio_stream_buffer to
al_get_audio_stream_fragment.</p></li>
<li><p>Many improvements to AQueue driver.</p></li>
</ul>
<p>Audio codecs:</p>
<ul>
<li><p>Add MOD/S3M/XM/IT file support, using the DUMB library.</p></li>
<li><p>Revert to a monolithic allegro_acodec addon, i.e. remove separate
allegro_flac, allegro_vorbis addons. WAV file support is in
allegro_acodec.</p></li>
<li><p>Implement DLL loading for FLAC/Vorbis/DUMB on Windows.
allegro_acodec will load the DLL at runtime to enable support for that
format. If your program does not require said format, you don’t need to
distribute the DLL.</p></li>
<li><p>Remove format-specific loader/saver audio codec
functions.</p></li>
<li><p>Make acodec loaders have consistent file closing
behaviour.</p></li>
<li><p>Optimised wave file loading.</p></li>
</ul>
<p>Examples:</p>
<ul>
<li>Make SPEED port run acceptably on graphics drivers without
FBOs.</li>
</ul>
<p>Documentation:</p>
<ul>
<li><p>Added documentation for the public Direct3D specific
functions.</p></li>
<li><p>Documented ALLEGRO_OPENGL_3_0 and
ALLEGRO_OPENGL_FORWARD_COMPATIBLE.</p></li>
</ul>
<p>Other:</p>
<ul>
<li>Many bug and documentation fixes.</li>
</ul>
<h1 id="changes-from-4.9.18-to-4.9.19-april-2010">Changes from 4.9.18 to
4.9.19 (April 2010)</h1>
<p>The main developers this time were: Milan Mimica, Trent Gamblin, Paul
Suntsov, Peter Wang. Other contributions from: Evert Glebbeek and Shawn
Hargreaves.</p>
<p>Graphics:</p>
<ul>
<li><p>Implemented support for transformations for memory
bitmaps.</p></li>
<li><p>Transformations now work properly when the target bitmap is a
sub-bitmap in OpenGL (still broken in D3D). Also fixed OpenGL bitmap
drawing in the same scenario (it used to always revert to software
drawing).</p></li>
<li><p>Use the memory drawers when the source bitmap is the backbuffer
with the rotated/scaled bitmaps.</p></li>
<li><p>Make al_put_pixel clip even if the bitmap is locked, which was
the reason why software primitives were not clipping.</p></li>
<li><p>Added al_put_blended_pixel, the blended version of
al_put_pixel.</p></li>
<li><p>Sub bitmaps of sub bitmaps must be clipped to the first
parent.</p></li>
<li><p>Don’t clear the transformation when setting the target bitmap in
OpenGL.</p></li>
<li><p>Implemented ALLEGRO_NOFRAME and ALLEGRO_FULLSCREEN_WINDOW in
WGL.</p></li>
<li><p>Set the ALLEGRO_DISPLAY-&gt;refresh_rate variable for fullscreen
modes under D3D.</p></li>
<li><p>Make d3d_clear return immediately if the display is in a lost
state.</p></li>
<li><p>Rewrote the function that reads the OpenGL version so it works
for previously unrecognised versions, and future versions.</p></li>
<li><p>Check for framebuffer extension on iPhone properly.</p></li>
<li><p>Fixed locking bugs on iPhone. allegro_ttf works now.</p></li>
</ul>
<p>Input:</p>
<ul>
<li><p>Removed al_set_mouse_range.</p></li>
<li><p>Don’t call al_get_mouse_state if the mouse driver isn’t installed
(Windows).</p></li>
<li><p>Send events even when the mouse cursor leaves the window, while
any buttons are held down (Windows and Mac OS X; X11 already did
this).</p></li>
<li><p>Allow mouse presses and accelerometer data simultaneously.
(iPhone)</p></li>
</ul>
<p>File I/O:</p>
<ul>
<li><p>Optimise al_fread{16,32}* by using only one call to al_fread
each.</p></li>
<li><p>Optimise al_fgetc() for stdio backend.</p></li>
</ul>
<p>Path:</p>
<ul>
<li>Fix an infinite loop in _find_executable_file when searching for the
executable on the PATH (Alan Coopersmith).</li>
</ul>
<p>Primitives addon:</p>
<ul>
<li><p>Made the software driver for the primitives addon check for
blending properly. Also, fixed two line shaders.</p></li>
<li><p>Made the D3D driver thread-safe. The whole addon should be
thread-safe now.</p></li>
<li><p>The addon now officially supports 3D vertices, even though the
software component can’t draw them yet.</p></li>
<li><p>Changed the way the primitives addon handles the OpenGL state
(fixes a few bugs and makes life easier for raw-OpenGL people)</p></li>
</ul>
<p>Image addon:</p>
<ul>
<li><p>Optimised BMP, PCX, TGA loaders.</p></li>
<li><p>Fix loading 16-bit BMP files.</p></li>
<li><p>Fix loading grayscale TGA images.</p></li>
<li><p>Nial Giacomelli fixed a bug where images could be corrupt using
the native Apple image loader (iPhone).</p></li>
</ul>
<p>Audio addon:</p>
<ul>
<li><p>Add al_is_audio_installed.</p></li>
<li><p>Fix al_attach_sample_instance_to_mixer for int16 mixers.</p></li>
<li><p>Implement attaching an INT16 mixer to another INT16
mixer.</p></li>
<li><p>Handle conversion when an INT16 mixer is attached to a UINT16
voice.</p></li>
</ul>
<p>Build system:</p>
<ul>
<li><p>Add an option to disable Apple native image loader (iPhone and OS
X).</p></li>
<li><p>Add ttf addon target to iPhone xcode project.</p></li>
</ul>
<p>Examples:</p>
<ul>
<li>Special contribution from Shawn “the Progenitor” Hargreaves.</li>
</ul>
<h1 id="changes-from-4.9.17-to-4.9.18-march-2010">Changes from 4.9.17 to
4.9.18 (March 2010)</h1>
<p>The main developers this time were: Trent Gamblin, Elias Pschernig,
Evert Glebbeek, Peter Wang. Other contributions from: Milan Mimica, Paul
Suntsov, Peter Hull.</p>
<p>Graphics:</p>
<ul>
<li><p>Fixed broken drawing into memory bitmaps as access to the global
transformation required an active display. Now both transformation and
current blending mode are stored in the display but provisions are made
for them to also work if the current thread has no display.</p></li>
<li><p>Fixed a bunch of clipping problems with OpenGL, especially with
sub-bitmaps.</p></li>
<li><p>Fix bug in OpenGL FBO setup when the target bitmap is the
sub-bitmap of a bitmap with an FBO.</p></li>
<li><p>Fixed crash in al_get_num_display_modes under OSX 10.5.</p></li>
<li><p>Fixed some problems in _al_convert_to_display_bitmap that caused
problems in WGL FS display resize.</p></li>
<li><p>Fixed al_set_current_display(NULL) on WGL.</p></li>
<li><p>Added subtractive blending. al_set_blender() takes another
parameter.</p></li>
<li><p>Added ALLEGRO_FULLSCREEN_WINDOW display flag (X11 and D3D for
now).</p></li>
<li><p>Allow changing ALLEGRO_FULLSCREEN_WINDOW with
al_toggle_display_flag.</p></li>
<li><p>Figured out how to switch display modes using Carbon on OS X
10.6.</p></li>
<li><p>Stop the OpenGL driver on iPhone from changing the currently
bound FBO behind our back when locking a bitmap.</p></li>
<li><p>Prevent screen flicker at app startup by simulating the splash
screen (iPhone).</p></li>
</ul>
<p>Input:</p>
<ul>
<li><p>Added “pressure” field to the mouse event struct and mouse state,
which can be used with pressure sensitive pointing devices,
i.e. tablets/stylus (currently OS X only).</p></li>
<li><p>Report scroll ball “w” position in mouse event struct, on OS
X.</p></li>
<li><p>Removed OS X 10.1 specific code from mouse driver. We don’t
support OS X 10.1 any more.</p></li>
<li><p>Fix building of Linux joystick driver on some systems.</p></li>
</ul>
<p>Threads:</p>
<ul>
<li><p>Fix a problem when al_join_thread() is called immediately after
al_start_thread(). The thread could be joined before the user’s thread
function starts at all.</p></li>
<li><p>Fix a possible deadlock with al_join_thread() on Windows (thanks
to Michał Cichoń for the report).</p></li>
<li><p>Fix some error messages running threading examples on OS
X.</p></li>
</ul>
<p>Other core:</p>
<ul>
<li><p>Added version check to al_install_system.</p></li>
<li><p>Rename al_free_path to al_destroy_path for consistency.</p></li>
<li><p>Make it possible to have an empty organization name with
al_set_org_name().</p></li>
<li><p>Changed implementation of AL_ASSERT to use POSIX-standard assert
instead.</p></li>
<li><p>Removed al_register_assert_handler.</p></li>
<li><p>Fix timer macros which did not parenthesize their
arguments.</p></li>
<li><p>Make stricmp, strlwr, strupr macros conditionally
defined.</p></li>
</ul>
<p>Audio addon:</p>
<ul>
<li><p>Rename al_attach_sample_to_mixer to
al_attach_sample_instance_to_mixer.</p></li>
<li><p>Fix a premature free() when detaching samples and other audio
objects.</p></li>
<li><p>Fix mixers attaching to mixers.</p></li>
<li><p>Pass correct number of samples to mixer postprocess
callback.</p></li>
<li><p>AudioQueue code was not compiled even though version requirements
may have been met (OS X).</p></li>
</ul>
<p>Primitives addon:</p>
<ul>
<li><p>Make high-level primitives functions thread safe. (note: the
DirectX driver is not yet thread safe)</p></li>
<li><p>Fix a bug causing crashes on Windows 7 when using the primitives
addon and Direct3D (Invalid vertex declarations were being
used).</p></li>
<li><p>Fixed another issue with primitives drawing to memory
bitmaps.</p></li>
<li><p>Hopefully fix the bitmap clipping bugs, and make the D3D and
OGL/Software outputs to be near-identical again.</p></li>
</ul>
<p>Image addon:</p>
<ul>
<li><p>Added a “native loader” for MacOS X that uses the NSImage bitmap
loading functions. In addition to .png and .jpg, this allows us to read
a whole zoo of image formats (listed in allegro.log).</p></li>
<li><p>Add native support for tif, jpg, gif, png, BMPf, ico, cur, xbm
formats to under IPhone.</p></li>
<li><p>Fixed an over-zealous ASSERT() that disallowed passing NULL to
al_register_bitmap_loader() despite this being an allowed
value.</p></li>
<li><p>Avoid using a field which is deprecated in libpng 1.4.</p></li>
</ul>
<p>Color addon:</p>
<ul>
<li>Make al_color_name_to_rgb return a bool.</li>
</ul>
<p>Native dialogs addon:</p>
<ul>
<li>Fixed some erratic behaviour and crashes on OS X.</li>
</ul>
<p>Build system:</p>
<ul>
<li><p>Set VERSION and SOVERSION properties on targets to give Unix
shared libraries proper sonames. e.g. liballegro[_addon].so.4.9,
liballegro[_addon].4.9.dylib</p></li>
<li><p>Static libraries are now named without version number suffixes to
minimise the differences with the shared libraries, which no longer have
the versions in their base names. e.g. liballegro[_addon]-static.a,
allegro[_addon]-static.lib</p></li>
<li><p>Windows import libraries are also named without version suffixes,
e.g. liballegro[_addon].a, allegro[_addon].lib</p></li>
<li><p>DLLs are named with a short version suffix, not the full version.
e.g. allegro-4.9.dll instead of allegro-4.9.18.dll</p></li>
<li><p>Add support for Mac OS X frameworks (untested), which are enabled
with WANT_FRAMEWORKS and WANT_EMBED. There is one framework per
addon.</p></li>
<li><p>Search for static OGG/Vorbis libraries built with MSVC named
libogg_static.lib, etc.</p></li>
<li><p>Updated iPhone XCode project.</p></li>
</ul>
<p>Examples:</p>
<ul>
<li><p>ex_mixer_pp: New example to test mixer postprocessing
callbacks.</p></li>
<li><p>ex_threads: Make it more visually interesting and test out
per-display transformations.</p></li>
<li><p>ex_ogre3d: New example demonstrating use of Ogre graphics
rendering alongside Allegro (currently GLX only). Commented out in the
build system for now.</p></li>
<li><p>ex_fs_window: New example to test ALLEGRO_FULLSCREEN_WINDOW flag
and al_toggle_display_flag.</p></li>
<li><p>ex_blend2: Updated to test subtractive blending, including
scaled/rotated blits and the primitives addon.</p></li>
<li><p>ex_mouse_events: Show “w” field.</p></li>
<li><p>ex_prim: Added possibility to click the mouse to advance screens
(for iPhone).</p></li>
<li><p>ex_vsync: Display config parameters and warning.</p></li>
<li><p>ex_gldepth: Make the textures appear again though we’re not sure
why they disappeared.</p></li>
</ul>
<p>Documentation:</p>
<ul>
<li><p>Many documentation updates.</p></li>
<li><p>Add which header file and which library to link with for each
page of the reference manual.</p></li>
<li><p>Minor improvements to HTML styling and man page output.</p></li>
</ul>
<h1 id="changes-from-4.9.16-to-4.9.17-february-2010">Changes from 4.9.16
to 4.9.17 (February 2010)</h1>
<p>The main developers this time were: Trent Gamblin, Elias Pschernig,
Evert Glebbeek, Paul Suntsov, Peter Wang.</p>
<p>Core:</p>
<ul>
<li><p>Removed END_OF_MAIN() everywhere.</p>
<p>For MSVC, we pass a linker option through a #pragma.</p>
<p>On Mac OS X, we rename main() and call it from a real main() function
in the allegro-main addon. The prototype for main() for C++ applications
should be “int main(int, char **)“, or the code will not compile on OS
X. For C, either of the normal ANSI forms is fine.</p>
<p>#define ALLEGRO_NO_MAGIC_MAIN disables the #pragma or name mangling,
so you can write a WinMain() or use al_run_main() yourself.</p></li>
</ul>
<p>Graphics:</p>
<ul>
<li><p>Fixed a bug in the OpenGL driver where al_draw_bitmap() wouldn’t
handle blitting from the back buffer.</p></li>
<li><p>Changing the blending color now works with deferred drawing (Todd
Cope).</p></li>
<li><p>Avoid some problems with window resizing in Windows/D3D.</p></li>
<li><p>Added al_get_d3d_texture_position.</p></li>
<li><p>Fixed bug under X11 where al_create_display() would always use
the display options from the first al_create_display() call.</p></li>
<li><p>Properly implemented
osx_get_opengl_pixelformat_attributes().</p></li>
<li><p>Fixed automatic detection of colour depth on OS X.</p></li>
<li><p>Fixed al_get_num_display_modes() on Mac OS X 10.6.</p></li>
<li><p>Removed al_get_num_display_formats, al_get_display_format_option,
al_set_new_display_format functions as they can’t be implemented on
OSX/iPhone/GPX ports (and were awkward to use).</p></li>
<li><p>Replaced al_toggle_window_frame function with a new function
al_toggle_display_flags.</p></li>
<li><p>al_load_bitmap() and al_convert_mask_to_alpha() no longer reset
the current transformation.</p></li>
<li><p>Add a minimize button to all non-resizable windows on
Windows.</p></li>
<li><p>The wgl display switch-in/out vtable entries were swapped (Milan
Mimica).</p></li>
</ul>
<p>Input:</p>
<ul>
<li><p>Some keycodes were out of order in src/win/wkeyboard.c</p></li>
<li><p>Fixed mouse range after resizing window on Windows.</p></li>
<li><p>Fixed (or worked around) a joystick axis detection problem on Mac
OS X.</p></li>
<li><p>Change timer counts from ‘long’ to ‘int64_t’.</p></li>
</ul>
<p>File I/O:</p>
<ul>
<li>Remove `ret_success’ arguments from al_fread32be/le.</li>
</ul>
<p>allegro-main addon:</p>
<ul>
<li>Added an “allegro-main” addon to hold the main() function that is
required on Mac OS X. This way the user can opt out of it.</li>
</ul>
<p>Primitives addon:</p>
<ul>
<li><p>Added support for sub-bitmap textures in OpenGL driver.</p></li>
<li><p>Added support for sub-bitmap textures in D3D driver. Made D3D
sub-bitmaps work better with user D3D code.</p></li>
</ul>
<p>Audio addons:</p>
<ul>
<li><p>Changed the _stream suffix to _f in the audio loading
functions.</p></li>
<li><p>Added the stream versions of loading functions for wav, ogg and
flac.</p></li>
<li><p>Rename audio I/O functions to al_load_{format}, al_save_{format},
al_load_{format}<em>f and al_save</em>{format}_f.</p></li>
<li><p>Added al_load_sample_f, al_save_sample_f, al_load_audio_stream_f
and the related functions.</p></li>
<li><p>Fixed a bug where al_save_sample was improperly handling the
extension.</p></li>
<li><p>al_drain_audio_stream would hang on an audio stream in the
‘playing’ state (the default) which wasn’t attached to
anything.</p></li>
<li><p>Fixed a potential deadlock on destroying audio streams by
shutting down the audio driver.</p></li>
<li><p>Comment out PA_SINK_SUSPENDED check, which breaks the PulseAudio
driver, at least on Ubuntu 9.10.</p></li>
<li><p>Replace unnecessary uses of `long’ in audio interfaces.</p></li>
</ul>
<p>Image addons:</p>
<ul>
<li><p>Fixed return values of al_save_bmp_f and al_save_pcx_f being
ignored.</p></li>
<li><p>Changed the _stream suffix to _f in the image loading
functions.</p></li>
</ul>
<p>TTF addon:</p>
<ul>
<li>Drawing TTF fonts no longer resets the current transformation.</li>
</ul>
<p>Build system:</p>
<ul>
<li><p>Add the CMake option FLAC_STATIC, required when using MSVC with a
static FLAC library.</p></li>
<li><p>Link with zlib if linking with PhysicsFS is not enough.</p></li>
<li><p>Updated iPhone project files.</p></li>
</ul>
<p>Documentation:</p>
<ul>
<li>Many documentation updates.</li>
</ul>
<p>Examples:</p>
<ul>
<li>ex_display_options: Added mouse support, query current display
settings, display error if a mode can’t be set.</li>
</ul>
<p>Bindings:</p>
<ul>
<li><p>Made the Python wrapper work under OSX.</p></li>
<li><p>Added a CMake option to build the Python wrapper.</p></li>
<li><p>Added al_run_main() mainly to support the Python wrapper on
OSX.</p></li>
</ul>
<h1 id="changes-from-4.9.15.1-to-4.9.16-november-2009">Changes from
4.9.15.1 to 4.9.16 (November 2009)</h1>
<p>The main developers this time were: Trent Gamblin and Paul
Suntsov.</p>
<p>Graphics:</p>
<ul>
<li><p>Fixed clipping of the right/bottom edges for the software
primitives.</p></li>
<li><p>Enable sub-pixel accuracy for rotated blitting in
software.</p></li>
<li><p>Made the D3D output look closer to the OGL/Software
output.</p></li>
<li><p>OpenGL driver now respects the ‘linear’ texture filtering
configuration option. Anisotropic is interpreted as linear at this
time.</p></li>
<li><p>Added deferred bitmap drawing (al_hold_bitmap_drawing).</p></li>
<li><p>Made the font addons use deferred bitmap drawing instead of the
primitives addon, removing the link between the two addons.</p></li>
<li><p>Changed al_transform_vertex to al_transform_coordinates to make
the function more versatile.</p></li>
<li><p>Transfered transformations from the primitives addon into the
core. Added documentation for that, as well as a new example,
ex_transform. Transformations work for hardware accelerated bitmap
drawing (including fonts) but the software component is not implemented
as of yet. Also fixed some bugs inside the code of the
transformations.</p></li>
<li><p>Increase performance of screen-&gt;bitmap blitting in the D3D
driver.</p></li>
<li><p>Fixed a strange bug with textured primitives (u/v repeat flags
were being ignored on occasion).</p></li>
<li><p>Added ALLEGRO_VIDEO_BITMAP for consistency.</p></li>
</ul>
<p>Input:</p>
<ul>
<li>Work around a memory leak in iPhone OS that occurs when the
accelerometer is on during touch input.</li>
</ul>
<p>Other core:</p>
<ul>
<li>Don’t #define true/false/bool macros in C++.</li>
</ul>
<p>Audio addon:</p>
<ul>
<li>Some minor cleanups to the Audio Queue driver.</li>
</ul>
<h1 id="changes-from-4.9.15-to-4.9.15.1-october-2009">Changes from
4.9.15 to 4.9.15.1 (October 2009)</h1>
<ul>
<li>Fixed a problem building on MinGW (dodgy dinput.h).</li>
</ul>
<h1 id="changes-from-4.9.14-to-4.9.15-october-2009">Changes from 4.9.14
to 4.9.15 (October 2009)</h1>
<p>The main developers this time were: Trent Gamblin, Elias Pschernig,
Matthew Leverton, Paul Suntsov, Peter Wang.</p>
<p>Core:</p>
<ul>
<li><p>Set the initial title of new windows to the app name.</p></li>
<li><p>Add al_set/get_event_source_data.</p></li>
<li><p>Make locking work on bitmaps that didn’t have an FBO prior to the
call on iPhone.</p></li>
<li><p>Make al_get_opengl_fbo work on iPhone.</p></li>
<li><p>Made iPhone port properly choose a visual (so depth buffer
creation works).</p></li>
</ul>
<p>Font addon:</p>
<ul>
<li>Improved drawing speed for longish strings. The font addon now
depends on the primitives addon.</li>
</ul>
<p>Primitives addon:</p>
<ul>
<li><p>Made the ribbon drawer handle the case of extremely sharp corners
more gracefully.</p></li>
<li><p>Make al_draw_pixel use blend color in the D3D driver.</p></li>
<li><p>Added POINT_LIST to the primitive types.</p></li>
<li><p>Various fixes for the D3D driver: fixed line loop drawing; made
the indexed primitives a little faster; added workabouts for people with
old/Intel graphics cards.</p></li>
<li><p>Fall back to software if given a memory bitmap as a
texture.</p></li>
<li><p>Removed OpenGL state saving code, it was causing massive slowdown
when drawing. Also removed glFlush for the same reason.</p></li>
</ul>
<p>Audio addon:</p>
<ul>
<li><p>Added PulseAudio driver.</p></li>
<li><p>Support AudioQueue driver on Mac OS X.</p></li>
<li><p>Add al_uninstall_audio exit function.</p></li>
<li><p>Added ALLEGRO_EVENT_AUDIO_STREAM_FINISHED event to signify when
non-looping streams made with al_load_audio_stream reach the end of the
file.</p></li>
<li><p>Fixed a deadlock when destroying voices.</p></li>
<li><p>Handle underruns in the r/w ALSA updater.</p></li>
<li><p>Minor change to the ALSA driver to improve compatibility with
PulseAudio.</p></li>
</ul>
<p>Documentation:</p>
<ul>
<li>Replaced awk/sh documentation scripts with C programs.</li>
</ul>
<h1 id="changes-from-4.9.13-to-4.9.14-september-2009">Changes from
4.9.13 to 4.9.14 (September 2009)</h1>
<p>The main developers this time were: Trent Gamblin, Elias Pschernig,
Paul Suntsov, Peter Wang. Other contributions from: Evert Glebbeek,
Matthew Leverton.</p>
<p>Ports:</p>
<ul>
<li>Elias Pschernig and Trent Gamblin started a iPhone port.</li>
</ul>
<p>Graphics:</p>
<ul>
<li><p>Added al_get_opengl_texture_size and
al_get_opengl_texture_position functions.</p></li>
<li><p>Try to take into account GL_PACK_ALIGNMENT, GL_UNPACK_ALIGNMENT
when locking OpenGL bitmaps.</p></li>
<li><p>Fixed all (hopefully) conversion mistakes in the color conversion
macros.</p></li>
<li><p>Sped up memory blitting, which was using conversion even with
identical formats (in some cases).</p></li>
<li><p>Make al_set_current_display(NULL); unset the current
display.</p></li>
<li><p>Added ALLEGRO_LOCK_READWRITE flag for al_lock_bitmap (in place of
0).</p></li>
<li><p>Fixed window titles which contain non-ASCII characters in
X11.</p></li>
<li><p>Added OES_framebuffer_object extension.</p></li>
</ul>
<p>Input:</p>
<ul>
<li><p>Added a lot more system mouse cursors.</p></li>
<li><p>Renamed al_get_cursor_position to
al_get_mouse_cursor_position.</p></li>
<li><p>Prevent Windows from intercepting ALT for system menus.</p></li>
</ul>
<p>Filesystem:</p>
<ul>
<li><p>Make the path returned by al_get_entry_name() owned by the
filesystem entry so the user doesn’t need to free it manually.</p></li>
<li><p>Renamed the filesystem entry functions, mainly to include
“fs_entry” in their names instead of just “entry”.</p></li>
<li><p>Reordered and renamed ALLEGRO_FS_INTERFACE members.</p></li>
<li><p>Make al_read_directory() not return . and .. directory
entries.</p></li>
<li><p>Renamed al_create_path_for_dir to
al_create_path_for_directory.</p></li>
<li><p>Added al_set_standard_file_interface,
al_set_standard_fs_interface.</p></li>
</ul>
<p>Events:</p>
<ul>
<li>Exported ALLEGRO_EVENT_TYPE_IS_USER.</li>
</ul>
<p>Threads:</p>
<ul>
<li>Added a new function al_run_detached_thread.</li>
</ul>
<p>Other core:</p>
<ul>
<li><p>Put prefixes on register_assert_handler,
register_trace_handler.</p></li>
<li><p>Added functions to return the compiled Allegro version and addon
versions.</p></li>
<li><p>Added al_ prefix to fixed point routines and document
them.</p></li>
<li><p>Added al_get_system_config().</p></li>
<li><p>Renamed al_system_driver() to al_get_system_driver().</p></li>
<li><p>Added 64-bit intptr_t detection for Windows.</p></li>
<li><p>Added work-around to make OS X port compile in 64 bit
mode.</p></li>
</ul>
<p>Addons:</p>
<ul>
<li>Renamed addons from a5_* to allegro_*.</li>
</ul>
<p>Image addon:</p>
<ul>
<li><p>Renamed the IIO addon to “allegro_image”.</p></li>
<li><p>Renamed *_entry functions that take ALLEGRO_FILE * arguments to
*_stream.</p></li>
<li><p>Fixed off-by-one error in greyscale JPEG loader.</p></li>
</ul>
<p>Audio addons:</p>
<ul>
<li><p>Renamed the kcm_audio addon to “allegro_audio”.</p></li>
<li><p>Renamed ALLEGRO_STREAM and stream functions to
ALLEGRO_AUDIO_STREAM and al_*audio_stream*.</p></li>
<li><p>Renamed al_stream_from_file to al_load_audio_stream</p></li>
<li><p>Added int16 mixing and configurable frequency and depth for
default mixer/voice (see configuration file).</p></li>
<li><p>Fixed FLAC decoding and added FLAC streaming support.</p></li>
<li><p>Changed the function signature of al_get_stream_fragment() to be
more straightforward.</p></li>
<li><p>Fixed bug in kcm audio that caused data to be deleted that was
still used.</p></li>
<li><p>Made ALSA audio driver work when the driver does not support mmap
(commonly because the ALSA really is PulseAudio).</p></li>
<li><p>Removed al_is_channel_conf function.</p></li>
</ul>
<p>Font addons:</p>
<ul>
<li><p>Optimized font loading by converting the mask color on a memory
copy instead of have to lock a texture.</p></li>
<li><p>Made the ttf addon read from file streams.</p></li>
</ul>
<p>Primitives addon:</p>
<ul>
<li><p>Fixed the direction of the last segment in software line loop,
and fixed the offsets in the line drawer.</p></li>
<li><p>Fixed the thick ribbon code in the primitives addon, was broken
for straight segments.</p></li>
<li><p>Various fixes/hacks for the D3D driver of the primitives addon:
hack to make the indexed primitives work and a fix for the textured
primitives.</p></li>
<li><p>Various enhancements to the transformations API: const
correctness, transformation inverses and getting the current
transformation.</p></li>
<li><p>Added support for custom vertex formats.</p></li>
<li><p>Flipped the v axis of texture coordinates for primitives. Now
(u=0, v=0) correspond to (x=0, y=0) on the texture bitmap.</p></li>
<li><p>Added a way to use texture coordinates measured in pixels.
Changed ALLEGRO_VERTEX to use them by default.</p></li>
</ul>
<p>PhysicsFS:</p>
<ul>
<li><p>PhysFS readdir didn’t prepend the parent directory name to the
returned entry’s path.</p></li>
<li><p>Set execute bit on PhysFS directory entries.</p></li>
</ul>
<p>Examples:</p>
<ul>
<li><p>Made examples report errors using the native dialogs addon if
WANT_POPUP_EXAMPLES is enabled in CMake (default).</p></li>
<li><p>Added new example ex_draw_bitmap, which simply measures FPS when
drawing a bunch of bitmaps (similar to exaccel in A4).</p></li>
</ul>
<p>Documentation:</p>
<ul>
<li><p>Many documentation updates and clarifications.</p></li>
<li><p>Fixed up Info and PDF documentation.</p></li>
</ul>
<p>Bindings:</p>
<ul>
<li>Added a script to generate a 1:1 Python wrapper (see
<code>python</code> directory).</li>
</ul>
<h1 id="changes-from-4.9.12-to-4.9.13-august-2009">Changes from 4.9.12
to 4.9.13 (August 2009)</h1>
<p>The main developers this time were: Trent Gamblin, Elias Pschernig,
Paul Suntsov, Peter Wang. Other contributions from: Todd Cope, Evert
Glebbeek, Michael Harrington, Matthew Leverton.</p>
<p>Ports:</p>
<ul>
<li>Trent Gamblin started a port to the GP2X Wiz handheld console.</li>
</ul>
<p>Graphics:</p>
<ul>
<li><p>Some OpenGL bitmap routines were not checking whether the target
bitmap was locked.</p></li>
<li><p>Scaled bitmap drawer was not setting the blend mode.</p></li>
<li><p>Fixed a bug where al_map_rgb followed by al_unmap_rgb would
return different values.</p></li>
<li><p>Fixed problems with sub-sub-bitmaps.</p></li>
<li><p>Fixed window placement on OS X, which did not properly translate
the coordinates specified by the user with
al_set_new_window_position().</p></li>
<li><p>Made is_wgl_extension_supported() fail gracefuly.</p></li>
<li><p>Added ALLEGRO_ALPHA_TEST bitmap flag.</p></li>
<li><p>Minor optimizations in some memory blitting routines.</p></li>
</ul>
<p>Input:</p>
<ul>
<li><p>Replaced (ALLEGRO_EVENT_SOURCE *) casting with type-safe
functions, namely al_get_keyboard_event_source,
al_get_mouse_event_source, al_get_joystick_event_source,
al_get_display_event_source, al_get_timer_event_source, etc.</p></li>
<li><p>Made it so that users can derive their own structures from
ALLEGRO_EVENT_SOURCE. al_create_user_event_source() is replaced by
al_init_user_event_source().</p></li>
<li><p>Fixed a problem on Windows where the joystick never regains focus
when tabbing away from a window.</p></li>
<li><p>Fixed a problem with missing key repeat with broken X.Org
drivers.</p></li>
<li><p>Implemented ALLEGRO_EVENT_MOUSE_ENTER_DISPLAY,
ALLEGRO_EVENT_MOUSE_LEAVE_DISPLAY for X11.</p></li>
</ul>
<p>Image I/O addon:</p>
<ul>
<li><p>Changed return type of al_save_bitmap() to bool.</p></li>
<li><p>Separated al_add_image_handler into al_register_bitmap_loader,
al_register_bitmap_saver, etc.</p></li>
<li><p>Made JPEG and PNG loaders handle al_create_bitmap()
failing.</p></li>
<li><p>Speed up JPEG loading and saving.</p></li>
<li><p>Fixed a reinitialisation issue in iio.</p></li>
</ul>
<p>Audio addons:</p>
<ul>
<li><p>Moved basic sample loading/saving routines to kcm_audio from
acodec and added file type registration functions.</p></li>
<li><p>Moved WAV support into kcm_audio.</p></li>
<li><p>Made WAV loader not choke on extra chunks in the wave.</p></li>
<li><p>Separated acodec into a5_flac, a5_vorbis addons. You need to
initialise them explicitly. Removed sndfile support.</p></li>
<li><p>Renamed al_*_oggvorbis to al_*_ogg_vorbis.</p></li>
<li><p>Changed argument order in al_save_sample and
al_stream_from_file.</p></li>
<li><p>Reordered parameters in al_attach_* functions to follow the word
order.</p></li>
<li><p>Renamed a few streaming functions to refer to fragments/buffers
as fragments consistently.</p></li>
<li><p>Added missing getters for ALLEGRO_SAMPLE fields.</p></li>
<li><p>Fixed mutex locking problems with kcm_audio objects.</p></li>
<li><p>Avoid underfilling a stream when it is fed with a short looping
stream.</p></li>
</ul>
<p>Other addons:</p>
<ul>
<li><p>Added glyph advance caching for the TTF addon.</p></li>
<li><p>Renamed al_register_font_extension to al_register_font_loader.
Match the file name extension case insensitively.</p></li>
</ul>
<p>Documentation:</p>
<ul>
<li><p>Lots of documentation updates.</p></li>
<li><p>Added a short “Getting started guide” to the reference
manual.</p></li>
</ul>
<p>Examples:</p>
<ul>
<li>Added another example for kcm_audio streaming: ex_synth.</li>
</ul>
<p>Build system:</p>
<ul>
<li><p>Fix pkg-config .pc files generated for static linking.</p></li>
<li><p>DLL symbols are now exported by name, not ordinals.</p></li>
</ul>
<h1 id="changes-from-4.9.11-to-4.9.12-july-2009">Changes from 4.9.11 to
4.9.12 (July 2009)</h1>
<ul>
<li><p>Fixed bugs in Windows keyboard driver (Todd Cope).</p></li>
<li><p>Fixed problems with ALLEGRO_MOUSE_STATE buttons on Windows (Milan
Mimica).</p></li>
<li><p>Fixed problems with PhysicsFS addon DLL on MSVC (Peter
Wang).</p></li>
<li><p>Set the D3D texture address mode to CLAMP (Todd Cope).</p></li>
<li><p>Fixed hang if Allegro was initialized more than once on Windows
(Michael Harrington).</p></li>
<li><p>Added a CMake option to force the use of DllMain style TLS on
Windows, for use with C# bindings (Michael Harrington).</p></li>
<li><p>Fixed a bug where drawing circles with a small radius would crash
(Elias Pschernig).</p></li>
<li><p>Fixed several memory leaks throughout the libraries (Trent
Gamblin).</p></li>
<li><p>Fixed some compilation warnings on Mac OS X (Evert
Glebbeek).</p></li>
<li><p>Small documentation updates.</p></li>
</ul>
<h1 id="changes-from-4.9.10.1-to-4.9.11-june-2009">Changes from 4.9.10.1
to 4.9.11 (June 2009)</h1>
<p>The main developers this time were: Trent Gamblin, Milan Mimica,
Elias Pschernig, Paul Suntsov, Peter Wang. Other contributions from:
Christopher Bludau, David Capello, Todd Cope, Evert Glebbeek, Peter
Hull.</p>
<p>Graphics:</p>
<ul>
<li><p>Changed rotation direction in memory blitting routines to match
D3D/OpenGL routines.</p></li>
<li><p>Made al_set_target_bitmap not create an FBO if the bitmap is
locked.</p></li>
<li><p>Added explicit FBO handling functions al_get_opengl_fbo and
al_remove_opengl_fbo in case we weren’t quite clever enough above and
the user has to intervene manually.</p></li>
<li><p>Added OpenGL 3.1 support and a bunch of new OpenGL
extensions.</p></li>
<li><p>Fixed al_inhibit_screensaver on Windows</p></li>
<li><p>Fixed selection of X pixel formats with WGL if a new bitmap has
alpha.</p></li>
<li><p>Made X11 icon work regardless of the backbuffer format.</p></li>
</ul>
<p>Input:</p>
<ul>
<li><p>Ditched DirectInput keyboard driver and replaced it with WinAPI.
Fixes several issues the old driver had.</p></li>
<li><p>Rewrote Windows mouse driver to use WinAPI instad of
DirectInput.</p></li>
<li><p>Added al_get_joystick_number.</p></li>
</ul>
<p>Filesystem:</p>
<ul>
<li><p>Merged ALLEGRO_FS_HOOK_ENTRY_INTERFACE into ALLEGRO_FS_INTERFACE
and made ALLEGRO_FS_INTERFACE public.</p></li>
<li><p>Added al_set_fs_interface and al_get_fs_interface.</p></li>
<li><p>Made al_opendir take an ALLEGRO_FS_ENTRY.</p></li>
<li><p>Removed functions which are obsolete or probably have no
use.</p></li>
<li><p>Made al_get_standard_path(ALLEGRO_PROGRAM_PATH) return a path
with an empty filename.</p></li>
</ul>
<p>Path routines:</p>
<ul>
<li>Renamed functions to follow conventions.</li>
</ul>
<p>File I/O:</p>
<ul>
<li>Fix al_fgets() returning wrong pointer value on success.</li>
</ul>
<p>Primitives addon:</p>
<ul>
<li><p>Added support for textured primitives in software.</p></li>
<li><p>Introduced ALLEGRO_PRIM_COLOR, removed ALLEGRO_VBUFFER.</p></li>
<li><p>Exposed the software line and triangle drawers to the
user.</p></li>
<li><p>Added rounded rectangles.</p></li>
<li><p>Fix an extraneous pixel bug in the triangle drawer.</p></li>
</ul>
<p>Audio addon:</p>
<ul>
<li><p>Change from using generic get/set audio property functions to
specific getter/setter functions.</p></li>
<li><p>Change return types on many functions to return true on success
instead of zero. (Watch out when porting your code, the C compiler won’t
help.)</p></li>
</ul>
<p>Native dialogs:</p>
<ul>
<li><p>Added a Windows implementation.</p></li>
<li><p>Added a title to al_show_native_message_box().</p></li>
</ul>
<p>Other addons:</p>
<ul>
<li><p>Implemented the filesystem interface for PhysicsFS and
demonstrate its use in ex_physfs.</p></li>
<li><p>Fixed al_color_html_to_rgb.</p></li>
</ul>
<p>Examples:</p>
<ul>
<li>Added an OpenGL pixel shader example.</li>
</ul>
<p>Build system:</p>
<ul>
<li>Output separate pkg-config .pc files for static linking.</li>
</ul>
<h1 id="changes-from-4.9.10-to-4.9.10.1-may-2009">Changes from 4.9.10 to
4.9.10.1 (May 2009)</h1>
<ul>
<li><p>Fixed uses of snprintf on MSVC.</p></li>
<li><p>Disabled ex_curl on Windows as it requires Winsock.</p></li>
</ul>
<h1 id="changes-from-4.9.9.1-to-4.9.10-may-2009">Changes from 4.9.9.1 to
4.9.10 (May 2009)</h1>
<p>The main developers this time were: Trent Gamblin, Evert Glebbeek,
Milan Mimica, Elias Pschernig, Peter Wang. Other contributions from:
Peter Hull, Paul Suntsov.</p>
<p>Graphics:</p>
<ul>
<li><p>Renamed al_clear() to al_clear_to_color().</p></li>
<li><p>Renamed al_opengl_version() to al_get_opengl_version().</p></li>
<li><p>Changed the direction of rotation for al_draw_rotated* from
counter-clockwise to clockwise.</p></li>
<li><p>Added new pixel format ALLEGRO_PIXEL_FORMAT_ABGR_8888_LE which
guanrantees component ordering.</p></li>
<li><p>Added ALLEGRO_NO_PRESERVE_TEXTURE flag.</p></li>
<li><p>Fixed horizontal flipping in plain software blitting
routines.</p></li>
<li><p>Fixed some blending bugs in the OpenGL driver.</p></li>
<li><p>Made OpenGL driver fall back to software rendering if separate
alpha blending is requested but not supported.</p></li>
<li><p>Added a config option which allows pretending a lower OpenGL
version.</p></li>
<li><p>Implemented al_get_num_display_formats(),
al_get_display_format_option() and al_set_new_display_format() for
WGL.</p></li>
<li><p>Fixed bug in al_get_display_format_option() with the GLX
driver.</p></li>
<li><p>Fixed a bug in the D3D driver that made display creation crash if
the first scored mode failed.</p></li>
<li><p>Made the OpenGL driver prefer the backbuffer format for new
bitmaps.</p></li>
<li><p>Defer FBO creation to when first setting a bitmap as target
bitmap.</p></li>
</ul>
<p>Input:</p>
<ul>
<li><p>Renamed some joystick functions.</p></li>
<li><p>Account for caps lock state in OS X keyboard driver.</p></li>
<li><p>Made UTF-8 input work on X11.</p></li>
</ul>
<p>File I/O:</p>
<ul>
<li><p>Separated part of fshook API into a distinct file I/O API
(actually generic streams).</p></li>
<li><p>Make the file I/O API match stdio more closely and account for
corner cases. (incomplete)</p></li>
<li><p>Made it possible to set a stream vtable on a per-thread basis,
which affects al_fopen() for that thread.</p></li>
<li><p>Added al_fget_ustr() to read a line conveniently.</p></li>
<li><p>Change al_fputs() not to do its own CR insertion.</p></li>
<li><p>Add al_fopen_fd() to create an ALLEGRO_FILE from an existing file
descriptor.</p></li>
</ul>
<p>Filesystem:</p>
<ul>
<li><p>Changed al_getcwd, al_get_entry_name to return
ALLEGRO_PATHs.</p></li>
<li><p>Renamed al_get_path to al_get_standard_path, and to return an
ALLEGRO_PATH.</p></li>
<li><p>Changed al_readdir to return an ALLEGRO_FS_ENTRY.</p></li>
<li><p>Added al_path_create_dir.</p></li>
<li><p>Removed some filesystem querying functions which take string
paths (ALLEGRO_FS_ENTRY versions will do).</p></li>
</ul>
<p>Config routines:</p>
<ul>
<li><p>Added functions to traverse configurations structures.</p></li>
<li><p>Change al_save_config_file() return type to bool.</p></li>
<li><p>Removed an arbitrary limit on the length of config
values.</p></li>
<li><p>Renamed configuration files to allegro5.cfg and
allegro5rc.</p></li>
</ul>
<p>String routines:</p>
<ul>
<li><p>Allegro 4-era string routines removed.</p></li>
<li><p>Added al_ustr_to_buffer().</p></li>
</ul>
<p>Other core:</p>
<ul>
<li><p>Renamed al_thread_should_stop to
al_get_thread_should_stop.</p></li>
<li><p>Added a new internal logging mechanism with configurable debug
“channels”, verbosity levels and output formatting.</p></li>
<li><p>Cleaned up ASSERT namespace pollution.</p></li>
</ul>
<p>Font addons:</p>
<ul>
<li><p>Renamed font and TTF addon functions to conform to
conventions.</p></li>
<li><p>Added al_init_ttf_addon.</p></li>
<li><p>Implemented slightly nicer text drawing API:</p>
<ul>
<li>functions are called “draw_text” instead of “textout”</li>
<li>centre/right alignment handled by a flag instead of functions</li>
<li>functions accepting ALLEGRO_USTR arguments provided</li>
<li>substring support is removed so ‘count’ arguments not needed in
usual case, however ALLEGRO_USTR functions provide similar thing.</li>
</ul></li>
<li><p>Removed al_font_is_compatible_font.</p></li>
<li><p>Sped up al_grab_font_from_bitmap() by five times.</p></li>
<li><p>ttf: Fixed a possible bug with kerning of unicode code points
&gt; 127.</p></li>
</ul>
<p>Image I/O addon:</p>
<ul>
<li><p>Renamed everything in the IIO addon.</p></li>
<li><p>Exposed al_load_bmp/al_save_bmp etc.</p></li>
</ul>
<p>Audio addon:</p>
<ul>
<li><p>Renamed al_mixer_set_postprocess_callback.</p></li>
<li><p>Added two config options to OSS driver.</p></li>
<li><p>Made ALSA read config settings from [alsa] section.</p></li>
</ul>
<p>Native dialogs:</p>
<ul>
<li>Added al_show_native_message_box() which works like
allegro_message() in A4. Implemented for GTK and OS X.</li>
</ul>
<p>PhysicsFS addon:</p>
<ul>
<li>Added PhysicsFS addon.</li>
</ul>
<p>Primitives addon:</p>
<ul>
<li><p>Removed global state flags.</p></li>
<li><p>Removed normals from ALLEGRO_VERTEX.</p></li>
<li><p>Removed read/write flags from vertex buffers.</p></li>
</ul>
<p>Examples:</p>
<ul>
<li><p>Added an example that tests
al_get_display_format_option().</p></li>
<li><p>Added an example which shows playing a sample directly to a
voice.</p></li>
<li><p>Added an example for PhysicsFS addon.</p></li>
<li><p>Added a (silly) example that loads an image off the network using
libcurl.</p></li>
<li><p>Added ex_dir which demonstrates the use of al_readdir and
al_get_entry_name.</p></li>
</ul>
<p>Other:</p>
<ul>
<li>Many bug and documentation fixes.</li>
</ul>
<h1 id="changes-from-4.9.9-to-4.9.9.1-march-2009">Changes from 4.9.9 to
4.9.9.1 (March 2009)</h1>
<ul>
<li><p>Made it compile and work with MSVC and MinGW 3.4.5.</p></li>
<li><p>Enabled SSE instruction set in MSVC.</p></li>
<li><p>Fixed X11 XIM keyboard input (partially?).</p></li>
<li><p>Fall back on the reference (software) rasterizer in D3D.</p></li>
</ul>
<h1 id="changes-from-4.9.8-to-4.9.9-march-2009">Changes from 4.9.8 to
4.9.9 (March 2009)</h1>
<p>The main developers this time were: Trent Gamblin, Evert Glebbeek,
Milan Mimica, Elias Pschernig, Paul Suntsov, Peter Wang. Other
contributions from: Todd Cope, Angelo Mottola, Trezker.</p>
<p>Graphics:</p>
<ul>
<li><p>Added display options API and scoring, based on AllegroGL, for
finer control over display creation.</p></li>
<li><p>Added API to query possible display formats (implemented on X,
Mac OS X).</p></li>
<li><p>Changed the bitmap locking mechanism. The caller can choose a
pixel format.</p></li>
<li><p>Added support for multisampling.</p></li>
<li><p>Simplified the semantics of al_update_display_region().</p></li>
<li><p>Optimised software blitting routines.</p></li>
<li><p>Optimised al_map_rgb/al_map_rgba.</p></li>
<li><p>Replaced al_draw_rectangle() and al_draw_line() from core library
with al_draw_rectangle_ex() and al_draw_line_ex() from the primitives
addon.</p></li>
<li><p>Implemented al_wait_for_vsync() everywhere except WGL.</p></li>
<li><p>Fixed problems with sub-bitmaps with the OpenGL driver.</p></li>
<li><p>Fixed bugs in software scaled/rotated blit routines.</p></li>
<li><p>Added a new pixel format ALLEGRO_PIXEL_FORMAT_ABGR_F32. Removed
ALLEGRO_PIXEL_FORMAT_ANY_15_WITH_ALPHA,
ALLEGRO_PIXEL_FORMAT_ANY_24_WITH_ALPHA.</p></li>
<li><p>Added support for creating OpenGL 3.0 contexts (untested; only
WGL/GLX for now). Relevant display flags are ALLEGRO_OPENGL_3_0 and
ALLEGRO_OPENGL_FORWARD_COMPATIBLE.</p></li>
<li><p>Allow disabling any OpenGL extensions from allegro.cfg to test
alternative rendering paths.</p></li>
<li><p>Fixed problem with windows only activating on title bar clicks
(Windows).</p></li>
<li><p>Fixed a minimize/restore bug in D3D (with the help of Christopher
Bludau).</p></li>
</ul>
<p>Input:</p>
<ul>
<li><p>Implemented al_set_mouse_xy under X11.</p></li>
<li><p>Added ALLEGRO_EVENT_MOUSE_WARPED event for
al_set_mouse_xy().</p></li>
</ul>
<p>Path routines:</p>
<ul>
<li><p>Made al_path_get_drive/filename return the empty string instead
of NULL if the drive or filename is missing.</p></li>
<li><p>Changed al_path_set_extension/al_path_get_extension to include
the leading dot.</p></li>
<li><p>Made al_path_get_extension(), al_path_get_basename(),
al_path_to_string() return pointers to internal strings.</p></li>
</ul>
<p>Unicode:</p>
<ul>
<li><p>Changed type of ALLEGRO_USTR; now you should use pointers to
ALLEGRO_USTRs.</p></li>
<li><p>Added UTF-16 conversion routines.</p></li>
</ul>
<p>Other core:</p>
<ul>
<li><p>Added ALLEGRO_GET_EVENT_TYPE for constructing integers for event
type IDs.</p></li>
<li><p>Renamed configuration function names to conform to
conventions.</p></li>
<li><p>Removed public MIN/MAX/ABS/MID/SGN/CLAMP/TRUE/FALSE
macros.</p></li>
<li><p>Replaced AL_PI by ALLEGRO_PI and documented it as part of public
API.</p></li>
</ul>
<p>Audio addons:</p>
<ul>
<li><p>Added stream seeking and stream start/end loop points.</p></li>
<li><p>Add panning support for kcm_audio (stereo only).</p></li>
</ul>
<p>Font addons:</p>
<ul>
<li><p>Made al_font_grab_font_from_bitmap() accept code point
ranges.</p></li>
<li><p>Made font routines use new UTF-8 routines; lifted some arbitrary
limits.</p></li>
<li><p>Fixed artefacts in bitmap font and TTF rendering.</p></li>
</ul>
<p>Image I/O addon:</p>
<ul>
<li><p>Made the capability to load/save images from/to ALLEGRO_FS_ENTRYs
public.</p></li>
<li><p>Added missing locking to .png save function.</p></li>
</ul>
<p>Other addons:</p>
<ul>
<li><p>Added native_dialog addon, with file selector dialogs.</p></li>
<li><p>Fixed many bugs in the primitives addon.</p></li>
<li><p>Made hsv/hsl color functions accept angles outside the 0..360°
range.</p></li>
<li><p>Fixed a bug in al_color_name_to_rgb.</p></li>
</ul>
<p>Examples:</p>
<ul>
<li><p>New programs: ex_audio_props, ex_blend_bench, ex_blend_test,
ex_blit, ex_clip, ex_draw, ex_font_justify, ex_gl_depth, ex_logo,
ex_multisample, ex_native_filechooser, ex_path_test, ex_rotate,
ex_stream_seek, ex_vsync, ex_warp_mouse. (ex_draw demonstrated known
bugs currently.)</p></li>
<li><p>Updated programs: ex_joystick_events, ex_monitorinfo
ex_pixelformat, ex_scale, ex_subbitmap.</p></li>
</ul>
<p>Build system:</p>
<ul>
<li><p>Added pkg-config support. .pc files are generated and installed
on Unix.</p></li>
<li><p>Allowed gcc to generate SSE instructions on x86 by default. For
Pentium 2 (or lower) compatibility you must uncheck a CMake option
before building Allegro.</p></li>
</ul>
<p>Other:</p>
<ul>
<li>Many other bug fixes.</li>
</ul>
<h1 id="changes-from-4.9.7.1-to-4.9.8-february-2009">Changes from
4.9.7.1 to 4.9.8 (February 2009)</h1>
<p>The main developers this time were: Thomas Fjellstrom, Trent Gamblin,
Evert Glebbeek, Matthew Leverton, Milan Mimica, Elias Pschernig, Paul
Suntsov, Peter Wang.</p>
<p>General:</p>
<ul>
<li>Lots of bug fixes.</li>
</ul>
<p>File system hooks:</p>
<ul>
<li><p>Rationalised file system hook functions. Failure reasons can be
retrieved with al_get_errno().</p></li>
<li><p>Enable large file support on 32-bit systems.</p></li>
<li><p>Converted the library and addons to use file system hook
functions.</p></li>
</ul>
<p>Path functions:</p>
<ul>
<li><p>Added al_path_clone(), al_path_make_canonical(),
al_path_make_absolute(), al_path_set_extension(), al_{get,set}_org_name,
al_{get,set}_app_name} functions.</p></li>
<li><p>Made al_path_get_extension() not include the leading “.” of the
extension,</p></li>
<li><p>Add AL_EXENAME_PATH, AL_USER_SETTINGS_PATH,
AL_SYSTEM_SETTINGS_PATH enums for al_get_path().</p></li>
</ul>
<p>String routines:</p>
<ul>
<li><p>Added a new, dynamically allocating UTF-8 string API. This uses
bstrlib internally, which is distributed under a BSD licence. Allegro 5
will expect all strings to be either ASCII compatible, or in UTF-8
encoding.</p></li>
<li><p>Removed many old Unicode string functions. (Eventually they will
all be removed.)</p></li>
</ul>
<p>Config routines:</p>
<ul>
<li>Clarified behaviour of al_config_add_comment, al_config_set_value
with regards to whitespace and leading comment marks.</li>
</ul>
<p>Graphics:</p>
<ul>
<li><p>Bug fixes on Windows and Mac OS X for resizing, switching away,
setting full screens, multi-monitor, etc.</p></li>
<li><p>Added an al_get_opengl_texture() convenience function.</p></li>
<li><p>Added separate alpha blending.</p></li>
<li><p>Added ALLEGRO_PIXEL_FORMAT_ANY.</p></li>
<li><p>Honour al_set_new_window_position() in X11 port.</p></li>
<li><p>Made the X11 port fail to set a full screen mode if the requested
resolution cannot be set rather than falling back to a windowed
mode.</p></li>
</ul>
<p>Input:</p>
<ul>
<li><p>Added a field to the mouse state struct to indicate the display
the mouse is currently on.</p></li>
<li><p>Made DirectX enumerate all joysticks/gamepads properly by using a
device type new to DirectInput 8.</p></li>
<li><p>Fixed a bug in wmouse.c where y was not changed in
al_set_mouse_xy.</p></li>
<li><p>Support ALLEGRO_EVENT_MOUSE_ENTER/LEAVE_DISPLAY events in
Windows.</p></li>
</ul>
<p>Addons:</p>
<ul>
<li><p>Added a primitives addon.</p></li>
<li><p>Revamp interface for kcm_audio addon to make simple cases
easier.</p></li>
<li><p>Added native .wav support and save sample routines to acodec
addon.</p></li>
<li><p>Added a colors addon.</p></li>
<li><p>Added memory file addon and example.</p></li>
</ul>
<p>TTF addon:</p>
<ul>
<li><p>Added al_ttf_get_text_dimensions() function.</p></li>
<li><p>Allow specifying the font size more precisely by passing a
negative font size.</p></li>
<li><p>Guess the filenames of kerning info for Type1 fonts.</p></li>
</ul>
<p>Documentation:</p>
<ul>
<li><p>Added a new documentation system using Pandoc. Now we can
generate HTML, man, Info and PDF formats.</p></li>
<li><p>Added and fixed lots of documentation.</p></li>
</ul>
<p>Examples:</p>
<ul>
<li><p>Added ex_prim, ex_mouse_focus examples.</p></li>
<li><p>Made ex_blend2 more comprehensive.</p></li>
<li><p>Updated ex_get_path example.</p></li>
<li><p>Made ex_ttf accept the TTF file name on the command
line.</p></li>
</ul>
<p>Build system:</p>
<ul>
<li>Use official CMAKE_BUILD_TYPE method of selecting which build
configuration. This should work better for non-make builds, however,
it’s no longer possible to build multiple configurations with a single
configuration step as we could previously.</li>
</ul>
<p>Removals:</p>
<ul>
<li><p>Remove outdated A4 tools.</p></li>
<li><p>Remove icodec addon.</p></li>
<li><p>SCons build was unmaintained and not working.</p></li>
</ul>
<h1 id="changes-from-4.9.7-to-4.9.7.1-december-2008">Changes from 4.9.7
to 4.9.7.1 (December 2008)</h1>
<ul>
<li>Scan aintern_dtor.h for export symbols, needed for MSVC.</li>
</ul>
<h1 id="changes-from-4.9.6-to-4.9.7-december-2008">Changes from 4.9.6 to
4.9.7 (December 2008)</h1>
<p>The main developers this time were: Trent Gamblin, Evert Glebbeek,
Peter Hull, Milan Mimica, Peter Wang.</p>
<p>Graphics:</p>
<ul>
<li><p>Fixed a bug where the “display” field of a bitmap was not
correctly reset when it was transfered to another display on OS
X.</p></li>
<li><p>Made al_create_display() respect al_set_new_window_position() on
OS X.</p></li>
<li><p>Fixed the bug that caused input focus to be lost in OS X when a
window was resized.</p></li>
<li><p>Made resizable Allegro windows respond properly to the green “+”
button at the top of the screen on OS X.</p></li>
<li><p>Properly implemented fullscreen resize in WGL.</p></li>
<li><p>Made the memory blenders work the same as the hardware
ones.</p></li>
<li><p>Made al_get_pixel()/al_draw_pixel() handle sub bitmaps in case
the bitmap was locked.</p></li>
<li><p>In the OpenGL driver, if the bitmap is locked by the user, use
memory drawing on the locked region.</p></li>
<li><p>Added implementations of al_inhibit_screensaver() for the X and
Mac OS X ports.</p></li>
<li><p>Added multi-monitor support to Mac OS X port
(untested!).</p></li>
<li><p>Other fixes.</p></li>
</ul>
<p>Input:</p>
<ul>
<li><p>Made al_get_keyboard_state() return structures with the `display’
field correctly set.</p></li>
<li><p>Made keyboard event member ‘unichar’ uppercase when
Shift/CapsLock is on, in Windows.</p></li>
<li><p>Made mouse cursor show/hide work with Mac OS X full
screen.</p></li>
</ul>
<p>Config routines:</p>
<ul>
<li>Preserve comment and empty lines in config files when writing.</li>
</ul>
<p>Addons:</p>
<ul>
<li><p>Add a simple interface layer for kcm_audio.</p></li>
<li><p>Made kcm_audio objects automatically be destroyed when it is shut
down.</p></li>
<li><p>Renamed functions in kcm_audio to conform better with the rest of
the library.</p></li>
<li><p>Made the TTF addon aggregate glyph cache bitmaps into larger
bitmaps for faster glyph rendering (less source bitmap
switching).</p></li>
</ul>
<p>Examples:</p>
<ul>
<li><p>Add an example to test the ALLEGRO_KEYBOARD_STATE `display’
field.</p></li>
<li><p>Add an example for testing config routines.</p></li>
<li><p>Add an example for checking software blending routines against
hardware blending.</p></li>
<li><p>Add an example for the simple interface for kcm_audio.</p></li>
</ul>
<h1 id="changes-from-4.9.5-to-4.9.6-november-2008">Changes from 4.9.5 to
4.9.6 (November 2008)</h1>
<p>The core developers this time were: Thomas Fjellstrom, Trent Gamblin,
Evert Glebbeek, Peter Hull, Milan Mimica, Jon Rafkind, Peter Wang.</p>
<p>Allegro 4.9.6 and onwards are licensed under the zlib licence (see
LICENSE.txt). This is a simple permissive free software licence, close
in spirit to the ‘giftware’ licence, but is clearer and more
well-known.</p>
<p>General:</p>
<ul>
<li><p>Added filesystem hook (fshook) and path API functions.</p></li>
<li><p>Many minor bug fixes.</p></li>
</ul>
<p>Graphics:</p>
<ul>
<li><p>Added allegro5/a5_opengl.h, which has to be included by programs
to use OpenGL specifics. ALLEGRO_EXCLUDE_GLX and ALLEGRO_EXCLUDE_WGL can
be #defined to exclude GLX and WGL OpenGL extensions
respectively.</p></li>
<li><p>Added allegro/a5_direct3d.h, which has to be included by programs
to use D3D specifics.</p></li>
<li><p>Fixed some drawing from and onto sub-bitmaps.</p></li>
<li><p>Fixed blending with the wrong color in case of
sub-bitmaps.</p></li>
<li><p>Fixed a bug in the D3D driver where the transformation matrix was
not reset after drawing a bitmap.</p></li>
<li><p>Added draw pixel to OpenGL driver.</p></li>
<li><p>Added more OpenGL extensions.</p></li>
<li><p>Added function to inhibit screen saver (currently Windows
only).</p></li>
</ul>
<p>Config routines:</p>
<ul>
<li><p>Added al_config_create().</p></li>
<li><p>Deleted al_config_set_global(). Made empty section name
equivalent to the global section.</p></li>
<li><p>Read system wide and home directory config files on Unix (Ryan
Patterson).</p></li>
</ul>
<p>Events:</p>
<ul>
<li>Added support for injecting user-defined events into event
queues.</li>
</ul>
<p>Audio addon:</p>
<ul>
<li>Made the ALSA driver read the device name from the config file (Ryan
Patterson).</li>
</ul>
<p>Examples:</p>
<ul>
<li><p>Added ex_subbitmap example.</p></li>
<li><p>Added ex_disable_screensaver example.</p></li>
</ul>
<p>Build system:</p>
<ul>
<li>Rationalised library names and made CMake and SCons build systems
agree on the names.</li>
</ul>
<h1 id="changes-from-4.9.4-to-4.9.5-october-2008">Changes from 4.9.4 to
4.9.5 (October 2008)</h1>
<p>The core developers this time were: Trent Gamblin, Evert Glebbeek,
Peter Hull, Milan Mimica, Elias Pschernig, Jon Rafkind, Peter Wang.</p>
<p>Graphics:</p>
<ul>
<li><p>Added fullscreen support on Mac OS X.</p></li>
<li><p>Added support for resizable windows on Mac OS X.</p></li>
<li><p>Made frameless windows respond to events on Mac OS X.</p></li>
<li><p>Fixed a problem with D3D blending.</p></li>
<li><p>Made D3D driver work on systems without hardware vertex
processing.</p></li>
<li><p>Made WGL driver fail more gracefully.</p></li>
<li><p>Implemented sprite flipping for OpenGL drivers (Steven
Wallace).</p></li>
<li><p>Added al_is_sub_bitmap() function.</p></li>
</ul>
<p>Input:</p>
<ul>
<li><p>Fixed input with multiple windows on Windows.</p></li>
<li><p>Fixed keyboard autorepeat events in X11.</p></li>
<li><p>Added al_is_keyboard_installed().</p></li>
<li><p>Fixed key shifts on Windows (ported from 4.2).</p></li>
<li><p>Fixed mouse button reporting on Mac OS X.</p></li>
<li><p>Implemented system mouse cursors on MacOS X.</p></li>
<li><p>Fixed mouse cursors with alpha channels on X11.</p></li>
<li><p>Some work on Mac OS X joystick support (incomplete).</p></li>
</ul>
<p>Events:</p>
<ul>
<li>Simplified internals of events system further. At the same time,
this change happens to also allow event queues to grow unboundedly. (You
should still avoid letting them get too big, of course.)</li>
</ul>
<p>Audio addons:</p>
<ul>
<li><p>Made ALLEGRO_STREAM objects emit events for empty fragments that
need to be refilled.</p></li>
<li><p>Added a possiblity to drain a stream created by
al_stream_from_file().</p></li>
<li><p>Added a function to rewind a stream.</p></li>
<li><p>Added gain support to ALLEGRO_STREAM and ALLEGRO_SAMPLE
objects.</p></li>
<li><p>Made it possible to attach a sample to a mixer that isn’t already
attached to something.</p></li>
<li><p>Fixed Ogg Vorbis loader on big-endian systems.</p></li>
<li><p>Made the OpenAL driver the least preferred driver, as it doesn’t
play stereo samples properly.</p></li>
</ul>
<p>Image addons:</p>
<ul>
<li><p>Added JPEG support to iio addon, using libjpeg.</p></li>
<li><p>Fixed TGA loader on big-endian systems.</p></li>
<li><p>Fixed image loading in icodec addon.</p></li>
</ul>
<p>Font addon:</p>
<ul>
<li><p>Fixed count-restricted text output functions calculations on
non-ASCII strings.</p></li>
<li><p>Made al_textout* functions always a ‘count’ parameter.</p></li>
<li><p>Renamed al_font_text_length* to al_font_text_width*.</p></li>
<li><p>Harmonised the order of al_font_textout* and al_font_textprintf*
arguments.</p></li>
</ul>
<p>Examples:</p>
<ul>
<li><p>Added ex_bitmap_flip example (Steven Wallace).</p></li>
<li><p>Added ex_mixer_chain example.</p></li>
<li><p>Split ex_events into smaller examples.</p></li>
<li><p>Made the demo use ALLEGRO_STREAM to play music.</p></li>
<li><p>Build an app bundle from the demo, on Mac OS X.</p></li>
</ul>
<p>Build system:</p>
<ul>
<li><p>Improved detection of external dependencies in CMake
build.</p></li>
<li><p>Guess compiler locations for MinGW and MSVC (CMake).</p></li>
<li><p>Many improvements to scons build, including install
support.</p></li>
</ul>
<p>General:</p>
<ul>
<li>Many other bug fixes.</li>
</ul>
<h1 id="changes-from-4.9.3-to-4.9.4-september-2008">Changes from 4.9.3
to 4.9.4 (September 2008)</h1>
<p>The core developers this time were: Trent Gamblin, Peter Hull, Milan
Mimica, Elias Pschernig and Peter Wang. Ryan Dickie and Jon Rafkind also
contributed.</p>
<p>General:</p>
<ul>
<li><p>Many bug fixes all around.</p></li>
<li><p>Added a public threads API.</p></li>
<li><p>Added a basic configuration API.</p></li>
<li><p>Added al_store_state/al_restore_state functions.</p></li>
<li><p>Added al_get_errno/al_set_errno (not used much yet).</p></li>
<li><p>Renamed some functions/structures to be more consistent.</p></li>
<li><p>Code formatting improvements.</p></li>
<li><p>Added more debugging messages.</p></li>
<li><p>Removed a lot of A4 code that is no longer used.</p></li>
</ul>
<p>Graphics:</p>
<ul>
<li><p>Added support for some new OpenGL extensions.</p></li>
<li><p>Multihead support on Windows (preliminary support on OSX and
Linux).</p></li>
<li><p>Many enhancements to all drivers.</p></li>
<li><p>Merged common parts of WGL and D3D drivers.</p></li>
<li><p>Borderless windows, setting window positions and titles.</p></li>
<li><p>Fullscreen support on OSX and Linux.</p></li>
<li><p>Do not clear bitmaps when they are created.</p></li>
<li><p>Improved compile times and DLL sizes by simplifying “memblit”
functions.</p></li>
<li><p>Added EXPOSE, SWITCH_IN and SWITCH_OUT display events.</p></li>
</ul>
<p>Build system:</p>
<ul>
<li><p>Many bug fixes and enhancements to SCons and CMake build
systems.</p></li>
<li><p>Support for Turbo C++ 2006.</p></li>
<li><p>Support for cross-compiling on Linux to MinGW (CMake).</p></li>
</ul>
<p>Events:</p>
<ul>
<li><p>Filled in a display field for all relevant events.</p></li>
<li><p>Added al_wait_for_event_until.</p></li>
</ul>
<p>Addons:</p>
<ul>
<li><p>Added an ImageMagick addon</p></li>
<li><p>Added iio (Image IO) addon</p>
<ul>
<li><p>Supports BMP, PCX, TGA.</p></li>
<li><p>Supports PNG support with libpng.</p></li>
</ul></li>
<li><p>Added new audio addon, kcm_audio. (The ‘audio’ addon was taken in
a new direction between the 4.9.3 and 4.9.4 releases, but we decided
against that, so actually it’s actually a continuation of the old audio
addon.)</p>
<ul>
<li><p>Added audio streaming functionality.</p></li>
<li><p>Added OSS, ALSA, DirectSound drivers.</p></li>
<li><p>A lot of reorganisation, internally and externally.</p></li>
</ul></li>
<li><p>Added TTF font addon, using FreeType.</p></li>
<li><p>Made all addons use “al_” prefix.</p></li>
</ul>
<p>Examples:</p>
<ul>
<li><p>Lots of new examples.</p></li>
<li><p>Wait for keypress in some examples instead of arbitrary
delay.</p></li>
<li><p>Clean up files when done in some examples.</p></li>
</ul>
<h1 id="changes-from-4.9.2-to-4.9.3-april-2008">Changes from 4.9.2 to
4.9.3 (April 2008)</h1>
<p>Graphics:</p>
<ul>
<li><p>Milan Mimica did lots of work on the OpenGL drivers, such as
adding an OpenGL driver for Windows and making the OpenGL code shared
between platforms.</p></li>
<li><p>Peter Hull added an OpenGL graphics driver for Mac OS X.</p></li>
<li><p>Milan Mimica made the OpenGL driver share contexts between
displays.</p></li>
<li><p>Peter Wang and Milan Mimica made the OpenGL driver work with
cards that don’t support non-power-of-two (NPOT) textures.</p></li>
<li><p>Trent Gamblin added support for NPOT textures in the Direct3D
driver.</p></li>
<li><p>Trent Gamblin fixed blending in memory drawing
functions.</p></li>
<li><p>Trent Gamblin added al_draw_pixel() which obeys
blending.</p></li>
<li><p>Trent Gamblin made al_clear() not affected by blending in
D3D.</p></li>
<li><p>Milan Mimica added the following functions to the public API:
al_opengl_version(), al_is_opengl_extension_supported(),
al_get_opengl_proc_address(), al_get_opengl_extension_list().</p></li>
<li><p>Milan Mimica added sub-bitmaps support for memory bitmaps and in
the OpenGL display driver.</p></li>
<li><p>Milan Mimica made displays keep a list of bitmaps. When
destroying a display its bitmaps will be managed properly,
e.g. converted to memory bitmaps if necessary. All display bitmaps will
be automatically destroyed on exit.</p></li>
<li><p>Peter Wang made X window resizing work without GLX 1.3.</p></li>
<li><p>Trent Gamblin fixed a bug in the Direct3D driver when windows
were minimized (thanks to David McCallum).</p></li>
<li><p>Trent Gamblin fixed the coordinates of Direct3D primitives to
match OpenGL style.</p></li>
<li><p>Peter Hull fixed some logic in bitmap drawing and
al_load_bitmap().</p></li>
</ul>
<p>Fonts:</p>
<ul>
<li><p>Milan Mimica made font drawing faster, by making glyphs
sub-bitmaps of a larger glyph sheet.</p></li>
<li><p>Milan Mimica and Peter Wang made font loading faster.</p></li>
<li><p>Trent Gamblin added versions of text output functions which take
as an explicit argument the length of the strings.</p></li>
</ul>
<p>Audio:</p>
<ul>
<li><p>A new audio API implementation, originally by Chris Robinson, was
added (currently as an addon only). It has received additional work in
the past from Milan Mimica and recently much work from Ryan
Dickie.</p></li>
<li><p>Ryan Dickie also added an acodec addon, which has loaders for
FLAC, Wave and Ogg Vorbis files, using other libraries.</p></li>
</ul>
<p>Timers:</p>
<ul>
<li><p>Ryan Dickie changed the type of timestamps throughout the API
from int expressed in milliseconds to double expressed in seconds and
improved timer resolution on Windows.</p></li>
<li><p>Ryan Dickie added an ‘error’ field to the timer event, and added
error and overhead statistics to exnew_timer.</p></li>
<li><p>Trent Gamblin made the Windows timer use
QueryPerformanceCounter.</p></li>
<li><p>Peter Wang split al_wait_for_event() into two functions, a
version that takes a timeout and a version that doesn’t.</p></li>
<li><p>Trent Gamblin merged the Windows and Unix timer source
files.</p></li>
</ul>
<p>Input:</p>
<ul>
<li><p>Peter Wang renamed some joystick and timer functions to adhere to
the <code>al_&lt;verb&gt;_&lt;noun&gt;</code> convention.</p></li>
<li><p>Peter Wang made al_num_joysticks() more lenient if there is no
joystick driver installed.</p></li>
</ul>
<p>Other:</p>
<ul>
<li><p>David Capello added support for various different BMPs.</p></li>
<li><p>Elias Pschernig fixed compilation of the X port in case the
XVidMode extension is unavailable (thanks to Thomas
Fjellstrom).</p></li>
<li><p>Elias Pschernig added a exnew_timer example.</p></li>
<li><p>Trent Gamblin added exnew_multiwin and exnew_drawpixels.</p></li>
<li><p>Peter Wang added exnew_timedwait and exnew_scale.</p></li>
<li><p>Jon Rafkind and Elias Pschernig updated the SCons build.</p></li>
<li><p>Jon Rafkind added a <code>_s</code> suffix to static libraries in
the SCons build.</p></li>
<li><p>Elias Pschernig did some work on cross-compilation with SCons and
MinGW.</p></li>
<li><p>Milan Mimica made the CMake build work with MSVC project
solutions and made the library build with MSVC 8.</p></li>
<li><p>Jacod Dawid added a nicer spaceship graphic for a5teroids
demo.</p></li>
<li><p>Many more bug fixes and documentation updates.</p></li>
</ul>
<h1 id="changes-from-4.9.1-to-4.9.2-november-2007">Changes from 4.9.1 to
4.9.2 (November 2007)</h1>
<p><em>This list is still to be summarised.</em></p>
<ul>
<li><p>Trent Gamblin made the mouse cursor always hide when the user
calls al_hide_mouse_cursor in fullscreen (D3D).</p></li>
<li><p>Trent Gamblin fixed some signedness warnings and implemented
show/hide_mouse in the display vtable for D3D.</p></li>
<li><p>Elias Pschernig made show/hide cursor use the display driver
instead of the 4.2 gfx_driver.</p></li>
<li><p>Elias Pschernig fixed missing keyboard events in
exnew_mouse_events example.</p></li>
<li><p>Elias Pschernig wired the X11 mouse driver to the XGLX system
driver.</p></li>
<li><p>Jon Rafkind made various fixes to get the OSX build to
compile</p></li>
<li><p>Trent Gamblin added exnew_mouse_events.</p></li>
<li><p>Trent Gamblin added exnew_mouse.</p></li>
<li><p>Jon Rafkind made the scons build get the library name
dynamically.</p></li>
<li><p>Jon Rafkind made the scons build link Allegro using -l instead of
using the full path.</p></li>
<li><p>Trent Gamblin added a note about MINGDIR in
readme_a5.txt.</p></li>
<li><p>Trent Gamblin removed -lalleg_unsharable from allegro-config.in,
since assembly is not used anymore.</p></li>
<li><p>Jon Rafkind fixed up allegro-config.</p></li>
<li><p>Trent Gamblin added some documentation on
ALLEGRO_MSESTATE.</p></li>
<li><p>Trent Gamblin listed the examples in readme_a5.txt.</p></li>
<li><p>Trent Gamblin improved some inline documentation.</p></li>
<li><p>Jon Rafkind removed /lib from install path in
unix.scons.</p></li>
<li><p>Jon Rafkind added the new demo to the scons build and allowed
addons to be built statically or shared.</p></li>
<li><p>Trent Gamblin made the glx line drawing function use
blending.</p></li>
<li><p>Trent Gamblin added cmake instructions to readme_a5.txt.</p></li>
<li><p>Elias Pschernig added readme_a5.txt.</p></li>
<li><p>Trent Gamblin fixed warnings in the demo.</p></li>
<li><p>Trent Gamblin fixed a crash-on-exit bug in tls.c.</p></li>
<li><p>Trent Gamblin replaced the old demo with a temporary
one.</p></li>
<li><p>Peter Wang fixed gcc string warnings.</p></li>
<li><p>Peter Wang added some assertions to display_new.c.</p></li>
<li><p>Peter Wang merged changes from the 4.2 branch.</p></li>
<li><p>Elias Pschernig removed an unnecessary import from the
naturaldocs upload script.</p></li>
<li><p>Elias Pschernig added a script to automatically upload the
naturaldocs generated documentation to the website.</p></li>
<li><p>Peter Wang fixed missed renamings from AL_ to ALLEGRO_ in the
Linux and X code.</p></li>
<li><p>Elias Pschernig merged 4.9-newgfx back to 4.9.</p></li>
<li><p>Peter Wang fixed a “ALLEGRO__JOYSTICK” typo.</p></li>
<li><p>Trent Gamblin renamed AL_ to ALLEGRO_ in input, events, and timer
code.</p></li>
<li><p>Elias Pschernig implemented outline flag and blending for
draw_rectangle in the GLX driver.</p></li>
<li><p>Elias Pschernig added another mysha.pcx for the font
example.</p></li>
<li><p>Elias Pschernig re-added GLX checked to scons build which went
missing in the merge.</p></li>
<li><p>Elias Pschernig added icon.xpm which went missing in the
merge.</p></li>
<li><p>Peter Wang replaced _al_draw_bitmap_region_memory_fast with
_al_draw_bitmap_region_memory.</p></li>
<li><p>Trent Gamblin made memblit.c compile a little faster in debug
mode.</p></li>
<li><p>Peter Wang mergedd changes in r7948:10859 on 4.9 branch to
4.9-newgfx branch.</p></li>
<li><p>Peter Wang enabled WANT_D3D by default. Only set ALLEGRO_D3D on
Windows.</p></li>
<li><p>Trent Gamblin made al_acknowledge_resize take the display as a
parameter.</p></li>
<li><p>Trent Gamblin fixed some warnings and made the MinGW build
compilable statically with gcc 4.2.1.</p></li>
<li><p>Peter Wang fixed a bug in
ALLEGRO_CONVERT_BGR_565_TO_ARGB_4444.</p></li>
<li><p>Peter Wang renamed al_memory_management_functions() to
al_set_memory_management_functions() and added some extra documenation
for it.</p></li>
<li><p>Peter Wang removed NaturalDocs markup for Allegro 4.x display
functions.</p></li>
<li><p>Peter Wang made OpenGL libraries link if building with X11
support.</p></li>
<li><p>Peter Wang fixed a signedness warning.</p></li>
<li><p>Peter Wang made al_destroy_bitmap return immediately when passed
a null pointer instead of segfaulting.</p></li>
<li><p>Elias Pschernig made some cosmetic improvements to the
code.</p></li>
<li><p>Elias Pschernig removed a bad optimization.</p></li>
<li><p>Elias Pschernig removed &gt; GLX 1.1 specific code.</p></li>
<li><p>Trent Gamblin fixed several of the floating point unmapping
functions that were doing integer division.</p></li>
<li><p>Elias Pschernig implemented blending in the GLX driver.</p></li>
<li><p>Elias Pschernig fixed GLX rotation to use radians and allow
negative angles.</p></li>
<li><p>Elias Pschernig implemented rotated blitting in the GLX
driver.</p></li>
<li><p>Jon Rafkind made scons install addons/font.</p></li>
<li><p>Jon Rafkind added a scons file for addons.</p></li>
<li><p>Jon Rafkind used target_scanner to find makedoc instead of using
Depends.</p></li>
<li><p>Jon Rafkind forced makedoc to be a dependancy of the
docs.</p></li>
<li><p>Trent Gamblin made 60hz the default refresh rate of the D3D
driver.</p></li>
<li><p>Trent Gamblin changed al_create_mouse_cursor to accept
ALLEGRO_BITMAP structures.</p></li>
<li><p>Trent Gamblin renamed __al_unmap_rgba to al_unmap_rgba_ex in the
glx driver.</p></li>
<li><p>Trent Gamblin made al_(map|unmap)<em>rgb(a)</em>*_ex
public.</p></li>
<li><p>Trent Gamblin made D3D windows show the resize cursor when
resizing windows.</p></li>
<li><p>Jon Rafkind added allegro includes for asmdef.</p></li>
<li><p>Jon Rafkind erased older build demo target.</p></li>
<li><p>Jon Rafkind added the demo to the scons build.</p></li>
<li><p>Jon Rafkind made it so assembly files can be built
statically.</p></li>
<li><p>Jon Rafkind made scons always build asmdef.</p></li>
<li><p>Trent Gamblin made al_acknowledge_resize and al_resize_display
adjust clipping in the D3D driver. Mad eal_set_current_display</p></li>
<li><p>Trent Gamblin used higher compatibility flags to Direct3DCreate9,
made D3D driver die more gracefully on unsupported configurations,
removed flags from draw_line, and did more error checking.</p></li>
<li><p>Trent Gamblin turned al_init macros into an inline
function.</p></li>
<li><p>Trent Gamblin commented out a TRACE line that was causing the
entire log to be overwritten.</p></li>
<li><p>Peter Wang fixed an incorrect call to
_al_vector_find_and_delete.</p></li>
<li><p>Peter Wang made various formatting fixes.</p></li>
<li><p>Peter Wang converted CR/LF line endings to LF.</p></li>
<li><p>Trent Gamblin added NaturalDocs for the graphics api.</p></li>
<li><p>Trent Gamblin fixed an instance where a variable could have been
used uninitialized.</p></li>
<li><p>Trent Gamblin fixed texture coordinates in the D3D
driver.</p></li>
<li><p>Trent Gamblin fixed formatting and an improper
assertion.</p></li>
<li><p>Trent Gamblin removed a redundant call to
al_set_target_bitmap.</p></li>
<li><p>Trent Gamblin fixed a bug in the DX joystick code that caused it
to assert when it shouldn’t.</p></li>
<li><p>Trent Gamblin made al_create_display call al_flip_display so the
window is cleared.</p></li>
<li><p>Trent Gamblin made the D3D driver work where render-to-texture is
not supported.</p></li>
<li><p>Trent Gamblin removed masking support completely.</p></li>
<li><p>Elias Pschernig got the font example working with the GLX
driver.</p></li>
<li><p>Elias Pschernig renamed the font addon in the scons
build.</p></li>
<li><p>Jon Rafkind made scons build modules in a separate
directory.</p></li>
<li><p>Jon Rafkind bumped the version to match cmake.</p></li>
<li><p>Jon Rafkind fixed esd to be like the other unix modules.</p></li>
<li><p>Trent Gamblin changed color map and unmap functions to use the
target bitmap.</p></li>
<li><p>Trent Gamblin added the font example to the cmake build
process.</p></li>
<li><p>Elias Pschernig added the font example to the scons build
process.</p></li>
<li><p>Elias Pschernig removed special handling of “src” dir, and made
various cosmetic changes.</p></li>
<li><p>Trent Gamblin made cmake install to MINGDIR.</p></li>
<li><p>Trent Gamblin added a better font and example for the bitmap font
addon.</p></li>
<li><p>Trent Gamblin removed unix header from install on other
platforms.</p></li>
<li><p>Trent Gamblin added a bitmap font addon.</p></li>
<li><p>Trent Gamblin fixed a locking bug in the D3D driver.</p></li>
<li><p>Elias Pschernig removed masking from the GLX driver.</p></li>
<li><p>Trent Gamblin implemented blending for memory bitmaps (very slow
unless the blend mode is ALLEGRO_ONE,ALLEGRO_ZERO with a pure white
blend color).</p></li>
<li><p>Trent Gamblin implemented blending for the D3D driver.</p></li>
<li><p>Trent Gamblin added
ALLEGRO_PIXEL_FORMAT_ANY_(15|16|24|32)_(WITH_ALPHA|NO_ALPHA) formats,
used ALLEGRO_PIXEL_FORMAT_ANY_32_NO_ALPHA in locking examples, and ixed
some formatting.</p></li>
<li><p>Trent Gamblin added al_clone_bitmap which makes an exact copy of
the color-data of a bitmap.</p></li>
<li><p>Trent Gamblin added a ALLEGRO_KEEP_BITMAP_FORMAT flag that forces
Allegro to use the same format as the disk file when loading
bitmaps.</p></li>
<li><p>Elias Pschernig implemented video bitmap masking for the GLX
driver (by converting to alpha textures and drawing with alpha
blending).</p></li>
<li><p>Elias Pschernig fixed clipping in the GLX driver.</p></li>
<li><p>Trent Gamblin removed ALLEGRO_MASK_SOURCE flag in favor of
ALLEGRO_USE_MASKING. Mask color is now a bitmap property. Removed
ALLEGRO_NO_ALPHA flag and changed the meaning of ALLEGRO_USE_ALPHA to
mean do alpha blending or not. Added al_set/get_bitmap_mask_color and
removed al_set/get_mask_color. New masking example added
(exnew_masking).</p></li>
<li><p>Trent Gamblin added proper clipping to al_put_pixel.</p></li>
<li><p>Trent Gamblin renamed graphics stuff from AL_ to ALLEGRO_ and
removed patterned drawing.</p></li>
<li><p>Elias Pschernig implemented clipping for the X11 GLX driver (only
for screen so far).</p></li>
<li><p>Trent Gamblin removed unused set_bitmap_clip entry from the
bitmap vtable.</p></li>
<li><p>Trent Gamblin made clipping always enabled and made the clipping
functions operate on the current target bitamp.</p></li>
<li><p>Trent Gamblin removed src/compat/coblit.c.</p></li>
<li><p>Trent Gamblin renamed scroll_display to scroll_screen in
display.c</p></li>
<li><p>Trent Gamblin Removed commented code from src/display.c. Removed
include/allegro/display.h and src/compat/cogfx.c</p></li>
<li><p>Elias Pschernig renamed XDUMMY driver to XGLX.</p></li>
<li><p>Elias Pschernig made some cosmetic changes.</p></li>
<li><p>Elias Pschernig made exblend work over the compatibility
screen.</p></li>
<li><p>Elias Pschernig implemented upload_compat_screen method in the
GLX driver.</p></li>
<li><p>Elias Pschernig optimized al_lock_bitmap/al_unlock_bitmap
slightly.</p></li>
<li><p>Elias Pschernig added a flags parameter to the drawing primitives
methods.</p></li>
<li><p>Trent Gamblin added flags to primitives in display vtable and
renamed draw_filled_rectangle vtable entry to draw_rectangle.</p></li>
<li><p>Elias Pschernig implemented AL_SINGLEBUFFER flag and fixed bug
with AL_FULLSCREEN in the GLX driver.</p></li>
<li><p>Trent Gamblin added a mode parameter to
al_set_drawing_pattern.</p></li>
<li><p>Trent Gamblin added AL_OUTLINED flag that is the default for
primitives.</p></li>
<li><p>Trent Gamblin added al_set_drawing_pattern and
al_get_drawing_pattern, added a flags parameters to all the primitive
drawing functions that can be: AL_FILLED, AL_PATTERNED, and added hline
and vline functions for memory bitmaps.</p></li>
<li><p>Trent Gamblin ifdefed d3d stuff in win/wnewsys.c.</p></li>
<li><p>Trent Gamblin removed d3dx9 library from CMakeLists.txt.</p></li>
<li><p>Trent Gamblin ifdefed Direct3D stuff in display.c.</p></li>
<li><p>Jon Rafkind made scons read win32 files from cmake file
list.</p></li>
<li><p>Trent Gamblin added al_wait_for_vsync and made it work with the
D3D driver.</p></li>
<li><p>Elias Pschernig implemented immediate-resize for
al_resize_display, and implemented fullscreen resizing.</p></li>
<li><p>Trent Gamblin added al_enable_bitmap_clip and
al_is_bitmap_clip_enabled, added al_create_sub_bitmap, and made it work
with D3D and memory bitmaps.</p></li>
<li><p>Elias Pschernig improved fullscreen handling.</p></li>
<li><p>Elias Pschernig added shutdown_system vtable entry to the system
driver, and automatically call it on program exit. This allows unsetting
fullscreen modes in the X11 driver.</p></li>
<li><p>Trent Gamblin added al_set_bitmap_clip and al_get_bitmap_clip,
and made them work with D3D and memory bitmaps.</p></li>
<li><p>Elias Pschernig added XF86Vidmode fullscreen modes.</p></li>
<li><p>Elias Pschernig added xdummy files to cmake files list.</p></li>
<li><p>Elias Pschernig made al_resize_display work on non-resizable
windows.</p></li>
<li><p>Elias Pschernig fixed opengl setup being issued in wrong
thread.</p></li>
<li><p>Elias Pschernig moved src/misc/colconv.c from windows sources to
general sources.</p></li>
<li><p>Elias Pschernig uncommented accidentally commented out
line.</p></li>
<li><p>Elias Pschernig made scons read the list of source files from
cmake/FileList.cmake, so there’s only one place to add new
files.</p></li>
<li><p>Trent Gamblin made _al_get_pixel_value faster.</p></li>
<li><p>Trent Gamblin made al_unmap_rgba_i use a table instead of relying
on al_unmap_rgba_f.</p></li>
<li><p>Peter Wang changed #includes to use file names from the root of
the include hierarchy, i.e. #include “allegro/internal/foo.h” instead of
#include “internal/foo.h” and likewise for
allegro/platform/foo.h.</p></li>
<li><p>Peter Wang removed some stray CR characters.</p></li>
<li><p>Trent Gamblin added al_get_bitmap_width, al_get_bitmap_height,
al_get_bitmap_format, and al_get_bitmap_flags.</p></li>
<li><p>Trent Gamblin made al_draw_rotated_(scaled_)bitmap only lock the
region of the destination is needs to for memory bitmaps.</p></li>
<li><p>Trent Gamblin made al_draw_scaled_bitmap use the AL_FLIP_*
flags.</p></li>
<li><p>Trent Gamblin added an example of resizing a fullscreen
display.</p></li>
<li><p>Elias Pschernig updated xdummy driver and implemented
al_resize_display for it.</p></li>
<li><p>Elias Pschernig added another testcase.</p></li>
<li><p>Trent Gamblin added al_get_display_width and
al_get_display_height, made al_get_display_* work on the current
display, and renamed al_notify_resize to al_acknowledge_resize.</p></li>
<li><p>Trent Gamblin uncommented everything in cogfx.c (removing the
display parameter).</p></li>
<li><p>Trent Gamblin made exnew_lockscreen use pitch.</p></li>
<li><p>Trent Gamblin fixed scaled conversion macros (4444, 555, 565),
added XRGB_8888 pixel format, made windowed mode default, moved
get_num_display_modes and get_display_mode into the system
vtable.</p></li>
<li><p>Trent Gamblin made exnew_lockbitmap use pitch.</p></li>
<li><p>Trent Gamblin fixed D3D unlocking bug, and used desktop format in
windowed mode if not specified.</p></li>
<li><p>Elias Pschernig fixed a bug where events reported the wrong
source display under X11.</p></li>
<li><p>Elias Pschernig added three simple test cases.</p></li>
<li><p>Elias Pschernig fixed al_lock_bitmap and al_unlock_bitmap
implementation in the xdummy driver (for now it works in a slow
way).</p></li>
<li><p>Trent Gamblin made al_notify_resize return success/failure and
added al_resize_display to resize the display from code.</p></li>
<li><p>Elias Pschernig started implementing lock_region and
unlock_region for the xdummy driver.</p></li>
<li><p>Elias Pschernig split xdraw.c out of xdisplay.c, used _AL_THREAD
instead of pthreads in the xdummy driver, added a lock to the xdummy
driver, in order to implement al_destroy_display, used the correct
format.</p></li>
<li><p>Elias Pschernig fixed a comment typo.</p></li>
<li><p>Elias Pschernig fixed a typo in
AL_CONVERT_PALETTE_8_TO_ABGR_8888.</p></li>
<li><p>Trent Gamblin improved D3D line drawing, added
al_get_num_display_modes and al_get_display_mode, and cleaned up &amp;
organized some code.</p></li>
<li><p>Trent Gamblin removed _al_win_delete_from_vector.</p></li>
<li><p>Trent Gamblin added draw_memory_bitmap_region vtable hook to
AL_DISPLAY.</p></li>
<li><p>Elias Pschernig implemented enough of the xdummy driver to run
exnewap (doesn’t display correctly yet though).</p></li>
<li><p>Elias Pschernig updated scons build files.</p></li>
<li><p>Elias Pschernig Removed windows specific includes from
exnewapi.c.</p></li>
<li><p>Elias Pschernig added missing al_convert_mask_to_alpha
prototype.</p></li>
<li><p>Peter Wang fixed src/tls.c to compile under Linux (not
tested).</p></li>
<li><p>Trent Gamblin put TLS support back in for MSVC and UNIX.</p></li>
<li><p>Trent Gamblin cleaned up some code, added headers to new source
files, grouped thread local variables into one structure (UNIX support
is broken for now), and made mask color thread local.</p></li>
<li><p>Trent Gamblin added clear, filled rectangle, and line for memory
bitmaps.</p></li>
<li><p>Trent Gamblin made it so the system driver is no longer hard
coded, added switch_out method to display vtable, made the D3D window
and system driver code generic.</p></li>
<li><p>Trent Gamblin merged 4.9-elias and 4.9-trentg into
4.9-newgfx.</p></li>
<li><p>Elias Pschernig adjusted prototype of _al_init to
implementation.</p></li>
<li><p>Elias Pschernig fixed a bogus cast.</p></li>
<li><p>Elias Pschernig fixed typo in al_get_new_diplay_format for
non-mingw.</p></li>
<li><p>Trent Gamblin made display and bitmap parameters local to the
calling thread.</p></li>
<li><p>Trent Gamblin added al_draw_rotated_bitmap and
al_draw_rotated_scaled_bitmap for memory bitmaps using Allegro’s
software rotation code as a base.</p></li>
<li><p>Trent Gamblin ported a stretch blit fix from 4.2, made al_init
call allegro_init, made al_draw_bitmap(_region) much faster on memory
bitmaps, and added al_draw_scaled_bitmap for memory bitmaps.</p></li>
<li><p>Trent Gamblin renamed AL_LOCKED_RECTANGLE to AL_LOCKED_REGION,
and started on memory bitmaps (al_draw_bitmap and al_draw_bitmap region
work).</p></li>
<li><p>Trent Gamblin made seperate functions for getting/setting
display/bitmap parameters, made backbuffer-as-source bitmap work in D3D,
and changed parameter ordering of some functions.</p></li>
<li><p>Trent Gamblin added al_is_compatible_bitmap removed dependancy on
Allegro’s 3D math functions from the D3D driver.</p></li>
<li><p>Trent Gamblin added al_convert_mask_to_alpha, made put/get_pixel
faster if the bitmap is locked ahead of time, and brought back
AL_MASK_SOURCE.</p></li>
<li><p>Trent Gamblin committed various bugfixes, implemented the RGB
mapping/unmapping functions from Bob’s API.</p></li>
<li><p>Trent Gamblin removed the D3DX library dependancy.</p></li>
<li><p>Trent Gamblin committed various bugfixes and got all of the
examples working with the D3D driver.</p></li>
<li><p>Trent Gamblin fixed some of the compatibility
conversions.</p></li>
<li><p>Trent Gamblin changed the examples back to autodetecting the
graphics driver.</p></li>
<li><p>Trent Gamblin made fullscreen mode work with the D3D driver, and
non-resizable windows.</p></li>
<li><p>Trent Gamblin finished bitmap conversion functions, improved
locking, implemented get/put pixel, and made some speed
improvements.</p></li>
<li><p>Trent Gamblin added a bitmap conversion function.</p></li>
<li><p>Trent Gamblin got the demo game running in D3D.</p></li>
<li><p>Trent Gamblin removed an unnecessary bitmap copy.</p></li>
<li><p>Trent Gamblin added a skeleton D3D driver.</p></li>
<li><p>Peter Wang fixed the generation of allegro-config under Mac
OS.</p></li>
<li><p>Michael Jensen fixed a mistake in the documenation for
is_compatible_font.</p></li>
<li><p>Peter Wang fixed wrong variable in example code for
load_font();</p></li>
<li><p>Trent Gamblin fixed some problems with the cmake build on
Windows.</p></li>
<li><p>Peter Wang removed the second parameter in a call to
_al_event_source_needs_to_generate_event() which was missed
earlier.</p></li>
<li><p>Peter Wang exposed some internal documentation on destructors,
events and event sources to NaturalDocs.</p></li>
<li><p>Peter Wang changed al_wait_for_event() so that a timeout value of
“0” means to not wait at all. To wait an indefinite amount of time the
caller should pass the AL_WAIT_FOREVER constant.</p></li>
<li><p>Peter Wang removed the declarations of al_event_source_set_mask
and al_event_source_mask which were missed in the previous
change.</p></li>
<li><p>Peter Wang removed event masking abilities, that is, for the user
to prevent an event source from generating particular event types. This
was implemented using bitfields which limited the number of event types
to 32. Although the limit could be raised event masking was probably not
very useful anyway. In all, the functions removed are:
al_event_source_mask, al_event_source_set_mask,
al_wait_for_specific_event. The al_wait_for_specific_event() API also
required event types to be bitfields.</p></li>
<li><p>Peter Wang fixed some spelling mistakes in the examples.</p></li>
<li><p>Peter Wang bumped the version to 4.9.2.</p></li>
<li><p>Peter Wang moved allegro/branches/4.3 to
allegro/branches/4.9.</p></li>
<li><p>Ryan Patterson clarified the documentation of
stop_sample().</p></li>
<li><p>Peter Wang and Trent Gamblin fixed some issues with the CMake
build. The allegro-config script was not generated properly and
liballeg_unsharable wasn’t being installed.</p></li>
<li><p>Matthew Leverton changed an instance of long long to LONG_LONG
and an LL suffix into a (LONG_LONG) cast, both for MSVC 6.</p></li>
<li><p>Matthew Leverton submitted a fix for MSVC 6 regarding MSVC’s lack
of a __FUNCTION__ macro.</p></li>
<li><p>orz, Matthew Leverton, and Peter Wang made the ALLEGRO_USE_C=1
option to work under MinGW and MSVC.</p></li>
<li><p>Anthony Cassidy fixed a typo.</p></li>
<li><p>Peter Wang removed the ‘msvc’ target from the fix.sh help message
as it should not be used by users any more. Added a comment that it is
used by zipup.sh.</p></li>
<li><p>Anthony ‘Timorg’ Cassidy made d_menu_proc fill up its assigned
area with the gui_bg_color.</p></li>
</ul>
<h1 id="changes-from-4.9.0-to-4.9.1-march-2007">Changes from 4.9.0 to
4.9.1 (March 2007)</h1>
<p><em>Note that 4.9.1 was called 4.3.1 when it was originally
released.</em></p>
<ul>
<li><p>Added a new mouse and cursor API. The new functions are:</p>
<p>al_install_mouse, al_uninstall_mouse, al_get_mouse,
al_get_mouse_num_buttons, al_get_mouse_num_axes, al_set_mouse_xy,
al_set_mouse_z, al_set_mouse_w, al_set_mouse_axis, al_set_mouse_range,
al_get_mouse_state, al_mouse_button_down, al_mouse_state_axis</p>
<p>al_create_mouse_cursor, al_destroy_mouse_cursor, al_set_mouse_cursor,
al_set_system_mouse_cursor, al_show_mouse_cursor,
al_hide_mouse_cursor</p></li>
<li><p>Added documentation for some parts of the 4.9 API using the
NaturalDocs generation system. The documentation is nowhere near as good
as a proper manual, but it’s still better than nothing.</p></li>
<li><p>Added a commented example demonstating the new API
(exnew_events.c).</p></li>
<li><p>Added CMake and SCons build systems. These are mainly for use by
Allegro developers at present.</p></li>
<li><p>Various bug fixes and minor changes.</p></li>
</ul>
<h1 id="changes-from-4.2-series-to-4.9.0-july-2006">Changes from 4.2
series to 4.9.0 (July 2006)</h1>
<p><em>Note that 4.9.0 was called 4.3.0 when it was originally
released.</em></p>
<p>Basically we’re just wrapping up what we have in version control up
to now. See the commit logs if you want details.</p>
<p>This release introduces a few new subsystems. We have an event
system, a new keyboard API, a new joystick API, a new timer API, and the
start of a new graphics API. All of these are subject to change, as is
usual for a WIP.</p>
<p>We are maintaining a certain level of source compatibility with the
4.2 API. If it’s easy to maintain compatibility then we do it, otherwise
compatibility is dropped. Obscure features are more likely to be
dropped.</p>
<p>This release has had minimal testing on Linux/x86, Windows/x86
(MinGW) and Windows/x86 (MSVC). It seems to work on some Linux/x86-64
machines also. Other ports are broken or untested.</p>
<p>The new functions are as follows (in no particular order). No real
documentation exists at the moment but interesting header files are:
altime.h, display.h, draw.h, events.h, joystick.h, keyboard.h,
timer.h.</p>
<ul>
<li><p>al_current_time al_rest</p></li>
<li><p>al_create_video_bitmap al_create_system_bitmap al_scroll_display
al_request_scroll al_poll_scroll al_show_video_bitmap
al_request_video_bitmap al_enable_triple_buffer al_create_display
al_set_update_method al_destroy_display al_flip_display al_get_buffer
al_get_update_method al_enable_vsync al_disable_vsync al_toggle_vsync
al_vsync_is_enabled al_blit al_blit_region al_blit_scaled</p></li>
<li><p>al_event_source_set_mask al_event_source_mask</p></li>
<li><p>al_create_event_queue al_destroy_event_queue
al_register_event_source al_unregister_event_source
al_event_queue_is_empty al_get_next_event al_peek_next_event
al_drop_next_event al_flush_event_queue al_wait_for_event
al_wait_for_specific_event</p></li>
<li><p>al_install_joystick al_uninstall_joystick al_num_joysticks
al_get_joystick al_release_joystick al_joystick_name
al_joystick_num_sticks al_joystick_stick_flags al_joystick_stick_name
al_joystick_num_axes al_joystick_axis_name al_joystick_button_name
al_get_joystick_state</p></li>
<li><p>al_install_keyboard al_uninstall_keyboard al_get_keyboard
al_set_keyboard_leds al_keycode_to_name al_get_keyboard_state
al_key_down</p></li>
<li><p>al_install_timer al_uninstall_timer al_start_timer al_stop_timer
al_timer_is_started al_timer_get_speed al_timer_set_speed
al_timer_get_count al_timer_set_count</p></li>
</ul>
<!-- vi: set sts=3 sw=3 et: -->
</div>
<!-- content -->
<div id="footer">
<div id="contact">
<p><a href="webmasters.html">Contact the webmasters</a></p>
</div>
<!-- contact -->
<p><a href="http://petition.eurolinux.org/index_html?LANG=en">
<img src="images/nopatents.png" border="0" alt="No ePatents"
    height="33" width="88" vspace="1" hspace="1" /> </a>
<a href="http://www.anybrowser.org/campaign/">
<img src="images/anyb.png" border="0" alt="Viewable with any browser"
    height="31" width="88" vspace="1" hspace="1" /> </a></p>
</div>
<!-- footer -->
</body>
</html>
